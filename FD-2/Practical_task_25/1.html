<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="./1.css">
	<title>Document</title>
</head>

<body>
	<div class="container">
		<div class="content">
			<a class="modal-btn" data-supermodal="modal__inputs" href="#" type="button">Open Form</a>
			<a class="modal-btn" href="#" data-supermodal="modal_video" data-supermodal-title="Немного видео"
				data-supermodal-content='Приятного просмотра =)'>Open video</a>
			<a class="modal-btn" href="#" data-supermodal="modal_thanks" data-supermodal-title="Немного благодарности"
				data-supermodal-content="Отдельная благодарность за столь многогранные домашние задания, благодаря им мы становимся умнее с каждым днем.">OpenThank
				You</a>
			<a class="modal-btn" href="#" data-supermodal="modal_defult" data-supermodal-title="Любой дефолтный заголовок"
				data-supermodal-content='Любой дефолтный контент'>Open default</a>
		</div>

		<div class="modal">
			<div id="modal__inputs" class="modal-container modal-closed">
				<div class="close-modal">❌</div>
				<h1>Добро пожаловать!</h1>
				<form>
					<input class="input-login" type="text" placeholder="Введите логин">
					<input class="input-password" type="text" placeholder="Введите пароль">
					<button class="btn">Подтвердить</button>
				</form>
			</div>

			<div id="modal_video" class="modal-container modal-closed">
				<div class="close-modal">❌</div>
				<h1 id="title"></h1>
				<p id="content"></p>
				<div>
					<iframe width="1280" height="720" src="https://www.youtube.com/embed/mir0cd9hEv8"
						title="Md-FD2-136-23_Cемененко Юрий_Разработка веб-приложений на JavaScript_22 Вебинар_10.01.2024"
						frameborder="0"
						allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
						allowfullscreen></iframe>
				</div>
			</div>

			<div id="modal_thanks" class="modal-container modal-closed">
				<div class="close-modal">❌</div>
				<h1 id="title"></h1>
				<p id="content"></p>
			</div>
		</div>
	</div>

	<script>
		function ModalView() {
			let myModalContainer = null;
			let modal = null;

			this.init = function (container) {
				myModalContainer = container;
				modal = document.querySelector('.modal');
			}

			this.show = function (modalId) {
				const modalElement = document.getElementById(modalId);
				modalElement.classList.remove('modal-closed');
			}

			this.hide = function (modalId) {
				const modalElement = document.getElementById(modalId);
				modalElement.classList.add('modal-closed');
			}

			this.createModalElement = function (modalId, modalTitle, modalContent) {
				const modalElement = document.createElement('div');
				modalElement.id = modalId;
				modalElement.classList.add('modal-container');

				const closeButton = document.createElement('div');
				closeButton.classList.add('close-modal');
				closeButton.innerText = '❌';

				modalElement.appendChild(closeButton);

				const titleElement = document.createElement('h1');
				titleElement.innerText = modalTitle;
				modalElement.appendChild(titleElement);

				const contentElement = document.createElement('p');
				contentElement.innerText = modalContent;
				modalElement.appendChild(contentElement);
				modal.appendChild(modalElement);
			}

			this.updateModalContent = function (modalId, modalTitle, modalContent) {
				const modalElement = document.getElementById(modalId);
				const titleElement = modalElement.querySelector('h1');
				const contentElement = modalElement.querySelector('p');
				titleElement.innerText = modalTitle;
				contentElement.innerText = modalContent;

			}
		}

		function ModalModel() {
			let myModalView = null;

			this.init = function (view) {
				myModalView = view;
			}

			this.checkingEvents = function (event) {
				if (event.target.classList.contains('close-modal')) {
					const modalId = event.target.parentElement.id;
					myModalView.hide(modalId);
				}
			}

			this.checkingAttribute = function (modalId, modalTitle, modalContent) {
				const existingModal = document.getElementById(modalId);
				if (existingModal) {
					if (modalTitle && modalContent) {
						myModalView.updateModalContent(modalId, modalTitle, modalContent);
					}
					myModalView.show(modalId);
				} else {
					if (modalTitle && modalContent) {
						myModalView.createModalElement(modalId, modalTitle, modalContent);
					}
				}
			}
		}

		function ModalController() {
			let myModalModel = null;
			let myModalContainer = null;
			let modal = null;
			let elements = null;

			this.init = function (model, container) {
				myModalModel = model;
				myModalContainer = container;
				modal = document.querySelector('.modal');
				elements = container.querySelectorAll('[data-supermodal]');

				elements.forEach((link) => {
					link.addEventListener('click', this.getLinkData.bind(this));
				});

				modal.addEventListener('click', this.checkingEvents);
			}

			this.getLinkData = function (event) {
				event.preventDefault();
				const link = event.target;
				const modalId = link.getAttribute('data-supermodal');
				const modalTitle = link.getAttribute('data-supermodal-title');
				const modalContent = link.getAttribute('data-supermodal-content');
				myModalModel.checkingAttribute(modalId, modalTitle, modalContent);
			}

			this.checkingEvents = function (event) {
				myModalModel.checkingEvents(event);
			}
		}

		const appModalView = new ModalView();
		const appModalModel = new ModalModel();
		const appModalController = new ModalController();
		const appModalContainer = document.querySelector('.container');

		appModalView.init(appModalContainer);
		appModalModel.init(appModalView);
		appModalController.init(appModalModel, appModalContainer);

		// const links = document.querySelectorAll('[data-supermodal]');
		// const modal = document.querySelector('.modal');

		// links.forEach(link => {
		// 	link.addEventListener('click', (event) => {
		// 		event.preventDefault();
		// 		const modalId = link.getAttribute('data-supermodal');
		// 		const modalTitle = link.getAttribute('data-supermodal-title');
		// 		const modalContent = link.getAttribute('data-supermodal-content');
		// 		const existingModal = document.getElementById(modalId);

		// 		if (existingModal) {
		// 			if (modalTitle && modalContent) {
		// 				const titleElement = existingModal.querySelector('h1');
		// 				const contentElement = existingModal.querySelector('p');
		// 				titleElement.innerText = modalTitle;
		// 				contentElement.innerText = modalContent;
		// 			}
		// 			existingModal.classList.toggle('modal-closed');
		// 		} else {
		// 			if (modalTitle && modalContent) {
		// 				const modalElement = document.createElement('div');
		// 				modalElement.id = modalId;
		// 				modalElement.classList.add('modal-closed', 'modal-container');

		// 				const closeButton = document.createElement('div');
		// 				closeButton.classList.add('close-modal');
		// 				closeButton.innerText = '❌';
		// 				closeButton.addEventListener('click', function () {
		// 					// event.stopPropagation();
		// 					modalElement.classList.toggle('modal-closed');
		// 				});

		// 				modalElement.appendChild(closeButton);

		// 				const titleElement = document.createElement('h1');
		// 				titleElement.innerText = modalTitle;
		// 				modalElement.appendChild(titleElement);

		// 				const contentElement = document.createElement('p');
		// 				contentElement.innerText = modalContent;
		// 				modalElement.appendChild(contentElement);

		// 				modal.appendChild(modalElement);
		// 				modalElement.classList.toggle('modal-closed');
		// 			}
		// 		}
		// 	});
		// });

		// modal.addEventListener('click', (event) => {
		// 	if (event.target.classList.contains("close-modal")) {
		// 		event.target.parentElement.classList.toggle('modal-closed');
		// 	}
		// });
	</script>
</body>

</html>