/*! For license information please see filenameac483aba2813d41531db.js.LICENSE.txt */
(()=>{"use strict";var e={151:(e,t,n)=>{n.d(t,{Z:()=>w});var i=n(81),s=n.n(i),r=n(645),o=n.n(r),a=n(637),c=n(667),l=n.n(c),h=new URL(n(722),n.b),d=new URL(n(474),n.b),u=new URL(n(455),n.b),p=new URL(n(531),n.b),f=o()(s());f.i(a.Z),f.push([e.id,"@import url(https://fonts.googleapis.com/css2?family=Bangers&display=swap);"]);var g=l()(h),m=l()(d),v=l()(u),y=l()(p);f.push([e.id,`@font-face{font-family:"Kashmir";src:url(${g}) format("truetype")}html{box-sizing:border-box;outline:none;margin:0;padding:0}*,*::before,*::after{box-sizing:inherit}body{font-family:"Bangers",system-ui;font-size:24px;background-color:#272727;background-image:url(${m});background-position:center center;background-repeat:no-repeat;background-size:cover;overflow:hidden;width:100%;height:100vh}.hidden{display:none}.show{display:block}.app .header{display:flex;justify-content:center}.app .header-logo{width:450px;height:150px}.app .main{height:100%;display:flex;align-items:center;flex-direction:column;width:auto;height:auto;position:relative}.app .main-menu{width:100%;text-align:end}.app .main-menu .menu-list{display:flex;justify-content:center;align-items:center;flex-direction:row;flex-wrap:wrap}.app .main-menu .menu-list .menu-link{text-decoration:none;display:inline-block;padding:10px 10px;height:50px;border-radius:10px;box-shadow:0 0 40px 40px #3c342e inset,0 0 0 0 #3c342e;font-family:"Kashmir",sans-serif;font-weight:bold;text-align:center;letter-spacing:2px;color:#fcd54c;transition:.15s ease-in-out;width:140px;margin:10px;height:auto;font-size:28px}.app .main-menu .menu-list .menu-link:hover{box-shadow:0 0 10px 0 #3c342e inset,0 0 10px 4px #3c342e;color:#3c342e;transform:translateY(-10px)}.app .main-menu .menu-list .menu-link:active{background-color:#3c342e;box-shadow:none}.app .main .content .main-title{padding:10px;text-align:center;font-size:28px}.app .main .content .rules{width:500px;max-width:100%;height:400px;max-height:100%;padding:10px;border-radius:25px;box-shadow:0 0 60px 10px rgba(0,0,0,.8)}.app .main .content .rules-title{text-align:center;font-size:28px}.app .main .content .rules-text{text-align:center;margin-top:30px}.app .main .content .records{width:500px;max-width:100%;height:400px;max-height:100%;padding:10px;border-radius:25px;box-shadow:0 0 60px 10px rgba(0,0,0,.8)}.app .main .content .records-title{text-align:center;font-size:28px}.app .main .content .error-text{text-align:center}.app .main .content .error a{color:#fcd54c}.app .main .content .game .game-field{display:flex;justify-content:space-between}.app .main #sound{width:20px;height:20px;background-color:rgba(0,0,0,0);border:none}.app .main .sound-off{background-image:url(${v})}.app .main .sound-on{background-image:url(${y})}.app .login{width:100vw;height:100vh;background-color:rgba(60,52,46,.9);z-index:15}.app .login-form{position:fixed;top:50%;left:50%;transform:translate(-50%, -50%);text-align:center;width:400px;height:300px;padding:20px;border:2px solid #fcd54c;border-radius:30px;box-shadow:0 0 60px 10px rgba(252,213,76,.8);display:flex;flex-direction:column;justify-content:space-between;align-items:center}.app .login-form .item{padding:10px}.app .login-form .item .input-login{padding:4px;background:#fcd54c;margin-top:10px;width:100%;border:none;border-radius:10px;opacity:.5}.app .login-form button{text-decoration:none;display:inline-block;padding:5px 10px;height:50px;border-radius:10px;box-shadow:0 0 40px 40px #3c342e inset,0 0 0 0 #3c342e;font-family:"Kashmir",sans-serif;font-weight:bold;text-align:center;letter-spacing:2px;color:#fcd54c;transition:.15s ease-in-out;width:150px;margin:10px;height:auto;font-size:24px;cursor:pointer}.app .login-form button:hover{box-shadow:0 0 10px 0 #3c342e inset,0 0 10px 4px #3c342e;color:#3c342e;transform:translateY(-10px)}.app .login-form button:active{background-color:#3c342e;box-shadow:none}canvas{width:auto;height:auto}.game__field{width:auto;height:auto}`,""]);const w=f},637:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(81),s=n.n(i),r=n(645),o=n.n(r)()(s());o.push([e.id,"/* http://meyerweb.com/eric/tools/css/reset/ \n   v2.0 | 20110126\n   License: none (public domain)\n*/\n\nhtml,\nbody,\ndiv,\nspan,\napplet,\nobject,\niframe,\nh1,\nh2,\nh3,\nh4,\nh5,\nh6,\np,\nblockquote,\npre,\na,\nabbr,\nacronym,\naddress,\nbig,\ncite,\ncode,\ndel,\ndfn,\nem,\nimg,\nins,\nkbd,\nq,\ns,\nsamp,\nsmall,\nstrike,\nstrong,\nsub,\nsup,\ntt,\nvar,\nb,\nu,\ni,\ncenter,\ndl,\ndt,\ndd,\nol,\nul,\nli,\nfieldset,\nform,\nlabel,\nlegend,\ntable,\ncaption,\ntbody,\ntfoot,\nthead,\ntr,\nth,\ntd,\narticle,\naside,\ncanvas,\ndetails,\nembed,\nfigure,\nfigcaption,\nfooter,\nheader,\nhgroup,\nmenu,\nnav,\noutput,\nruby,\nsection,\nsummary,\ntime,\nmark,\naudio,\nvideo {\n\tmargin: 0;\n\tpadding: 0;\n\tborder: 0;\n\tfont-size: 100%;\n\tvertical-align: baseline;\n}\n\n/* HTML5 display-role reset for older browsers */\narticle,\naside,\ndetails,\nfigcaption,\nfigure,\nfooter,\nheader,\nhgroup,\nmenu,\nnav,\nsection {\n\tdisplay: block;\n}\n\nbody {\n\tline-height: 1;\n}\n\nol,\nul {\n\tlist-style: none;\n}\n\nblockquote,\nq {\n\tquotes: none;\n}\n\nblockquote:before,\nblockquote:after,\nq:before,\nq:after {\n\tcontent: '';\n\tcontent: none;\n}\n\ntable {\n\tborder-collapse: collapse;\n\tborder-spacing: 0;\n}",""]);const a=o},645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",i=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),i&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),i&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,i,s,r){"string"==typeof e&&(e=[[null,e,void 0]]);var o={};if(i)for(var a=0;a<this.length;a++){var c=this[a][0];null!=c&&(o[c]=!0)}for(var l=0;l<e.length;l++){var h=[].concat(e[l]);i&&o[h[0]]||(void 0!==r&&(void 0===h[5]||(h[1]="@layer".concat(h[5].length>0?" ".concat(h[5]):""," {").concat(h[1],"}")),h[5]=r),n&&(h[2]?(h[1]="@media ".concat(h[2]," {").concat(h[1],"}"),h[2]=n):h[2]=n),s&&(h[4]?(h[1]="@supports (".concat(h[4],") {").concat(h[1],"}"),h[4]=s):h[4]="".concat(s)),t.push(h))}},t}},667:e=>{e.exports=function(e,t){return t||(t={}),e?(e=String(e.__esModule?e.default:e),/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]|(%20)/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e):e}},81:e=>{e.exports=function(e){return e[1]}},379:e=>{var t=[];function n(e){for(var n=-1,i=0;i<t.length;i++)if(t[i].identifier===e){n=i;break}return n}function i(e,i){for(var r={},o=[],a=0;a<e.length;a++){var c=e[a],l=i.base?c[0]+i.base:c[0],h=r[l]||0,d="".concat(l," ").concat(h);r[l]=h+1;var u=n(d),p={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==u)t[u].references++,t[u].updater(p);else{var f=s(p,i);i.byIndex=a,t.splice(a,0,{identifier:d,updater:f,references:1})}o.push(d)}return o}function s(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,s){var r=i(e=e||[],s=s||{});return function(e){e=e||[];for(var o=0;o<r.length;o++){var a=n(r[o]);t[a].references--}for(var c=i(e,s),l=0;l<r.length;l++){var h=n(r[l]);0===t[h].references&&(t[h].updater(),t.splice(h,1))}r=c}}},569:e=>{var t={};e.exports=function(e,n){var i=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(n)}},216:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},795:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var i="";n.supports&&(i+="@supports (".concat(n.supports,") {")),n.media&&(i+="@media ".concat(n.media," {"));var s=void 0!==n.layer;s&&(i+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),i+=n.css,s&&(i+="}"),n.media&&(i+="}"),n.supports&&(i+="}");var r=n.sourceMap;r&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),t.styleTagTransform(i,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},722:(e,t,n)=>{e.exports=n.p+"KASHMIR.TTF"},474:(e,t,n)=>{e.exports=n.p+"bac.png"},455:(e,t,n)=>{e.exports=n.p+"offSound.png"},531:(e,t,n)=>{e.exports=n.p+"onSound.png"}},t={};function n(i){var s=t[i];if(void 0!==s)return s.exports;var r=t[i]={id:i,exports:{}};return e[i](r,r.exports,n),r.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var i=t.getElementsByTagName("script");if(i.length)for(var s=i.length-1;s>-1&&!e;)e=i[s--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),n.b=document.baseURI||self.location.href,n.nc=void 0,(()=>{var e=n(379),t=n.n(e),i=n(795),s=n.n(i),r=n(569),o=n.n(r),a=n(565),c=n.n(a),l=n(216),h=n.n(l),d=n(589),u=n.n(d),p=n(151),f={};f.styleTagTransform=u(),f.setAttributes=c(),f.insert=o().bind(null,"head"),f.domAPI=s(),f.insertStyleElement=h(),t()(p.Z,f),p.Z&&p.Z.locals&&p.Z.locals;const g=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let s=e.charCodeAt(i);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=63&s|128):55296==(64512&s)&&i+1<e.length&&56320==(64512&e.charCodeAt(i+1))?(s=65536+((1023&s)<<10)+(1023&e.charCodeAt(++i)),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=63&s|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=63&s|128)}return t},m={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let t=0;t<e.length;t+=3){const s=e[t],r=t+1<e.length,o=r?e[t+1]:0,a=t+2<e.length,c=a?e[t+2]:0,l=s>>2,h=(3&s)<<4|o>>4;let d=(15&o)<<2|c>>6,u=63&c;a||(u=64,r||(d=64)),i.push(n[l],n[h],n[d],n[u])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(g(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,i=0;for(;n<e.length;){const s=e[n++];if(s<128)t[i++]=String.fromCharCode(s);else if(s>191&&s<224){const r=e[n++];t[i++]=String.fromCharCode((31&s)<<6|63&r)}else if(s>239&&s<365){const r=((7&s)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[i++]=String.fromCharCode(55296+(r>>10)),t[i++]=String.fromCharCode(56320+(1023&r))}else{const r=e[n++],o=e[n++];t[i++]=String.fromCharCode((15&s)<<12|(63&r)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let t=0;t<e.length;){const s=n[e.charAt(t++)],r=t<e.length?n[e.charAt(t)]:0;++t;const o=t<e.length?n[e.charAt(t)]:64;++t;const a=t<e.length?n[e.charAt(t)]:64;if(++t,null==s||null==r||null==o||null==a)throw new v;const c=s<<2|r>>4;if(i.push(c),64!==o){const e=r<<4&240|o>>2;if(i.push(e),64!==a){const e=o<<6&192|a;i.push(e)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class v extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const y=function(e){return function(e){const t=g(e);return m.encodeByteArray(t,!0)}(e).replace(/\./g,"")},w=function(e){try{return m.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null},b=()=>{try{return function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const e=process.env.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"==typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}const t=e&&w(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}},I=()=>{var e;return null===(e=b())||void 0===e?void 0:e.config},_=e=>{var t;return null===(t=b())||void 0===t?void 0:t[`_${e}`]};class T{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function S(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function E(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function k(){try{return"object"==typeof indexedDB}catch(e){return!1}}function C(){return new Promise(((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var e;t((null===(e=s.error)||void 0===e?void 0:e.message)||"")}}catch(e){t(e)}}))}class R extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,R.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,x.prototype.create)}}class x{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],r=s?function(e,t){return e.replace(P,((e,n)=>{const i=t[n];return null!=i?String(i):`<${n}?>`}))}(s,n):"Error",o=`${this.serviceName}: ${r} (${i}).`;return new R(i,o,n)}}const P=/\{\$([^}]+)}/g;function A(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const s of n){if(!i.includes(s))return!1;const n=e[s],r=t[s];if(O(n)&&O(r)){if(!A(n,r))return!1}else if(n!==r)return!1}for(const e of i)if(!n.includes(e))return!1;return!0}function O(e){return null!==e&&"object"==typeof e}function N(e){const t=[];for(const[n,i]of Object.entries(e))Array.isArray(i)?i.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function L(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,i]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(i)}})),t}function D(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class M{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let i;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");i=function(e,t){if("object"!=typeof e||null===e)return!1;for(const t of["next","error","complete"])if(t in e&&"function"==typeof e[t])return!0;return!1}(e)?e:{next:e,error:t,complete:n},void 0===i.next&&(i.next=U),void 0===i.error&&(i.error=U),void 0===i.complete&&(i.complete=U);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch(e){}})),this.observers.push(i),s}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function U(){}const B=1e3,F=2,j=144e5,H=.5;function V(e,t=B,n=F){const i=t*Math.pow(n,e),s=Math.round(H*i*(Math.random()-.5)*2);return Math.min(j,i+s)}function $(e){return e&&e._delegate?e._delegate:e}class W{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const z="[DEFAULT]";class q{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new T;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(e){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),i=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(e){if(i)return null;throw e}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:z})}catch(e){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(e){}}}}clearInstance(e=z){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(e=z){return this.instances.has(e)}getOptions(e=z){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[e,t]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(e)&&t.resolve(i);return i}onInit(e,t){var n;const i=this.normalizeInstanceIdentifier(t),s=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;s.add(e),this.onInitCallbacks.set(i,s);const r=this.instances.get(i);return r&&e(r,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(e){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(i=e,i===z?void 0:i),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(e){}var i;return n||null}normalizeInstanceIdentifier(e=z){return this.component?this.component.multipleInstances?e:z:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class K{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new q(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const G=[];var J;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(J||(J={}));const Y={debug:J.DEBUG,verbose:J.VERBOSE,info:J.INFO,warn:J.WARN,error:J.ERROR,silent:J.SILENT},X=J.INFO,Z={[J.DEBUG]:"log",[J.VERBOSE]:"log",[J.INFO]:"info",[J.WARN]:"warn",[J.ERROR]:"error"},Q=(e,t,...n)=>{if(t<e.logLevel)return;const i=(new Date).toISOString(),s=Z[t];if(!s)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[s](`[${i}]  ${e.name}:`,...n)};class ee{constructor(e){this.name=e,this._logLevel=X,this._logHandler=Q,this._userLogHandler=null,G.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in J))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?Y[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,J.DEBUG,...e),this._logHandler(this,J.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,J.VERBOSE,...e),this._logHandler(this,J.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,J.INFO,...e),this._logHandler(this,J.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,J.WARN,...e),this._logHandler(this,J.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,J.ERROR,...e),this._logHandler(this,J.ERROR,...e)}}const te=(e,t)=>t.some((t=>e instanceof t));let ne,ie;const se=new WeakMap,re=new WeakMap,oe=new WeakMap,ae=new WeakMap,ce=new WeakMap;let le={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return re.get(e);if("objectStoreNames"===t)return e.objectStoreNames||oe.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return de(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function he(e){return"function"==typeof e?(t=e)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(ie||(ie=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(ue(this),e),de(se.get(this))}:function(...e){return de(t.apply(ue(this),e))}:function(e,...n){const i=t.call(ue(this),e,...n);return oe.set(i,e.sort?e.sort():[e]),de(i)}:(e instanceof IDBTransaction&&function(e){if(re.has(e))return;const t=new Promise(((t,n)=>{const i=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",r),e.removeEventListener("abort",r)},s=()=>{t(),i()},r=()=>{n(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",s),e.addEventListener("error",r),e.addEventListener("abort",r)}));re.set(e,t)}(e),te(e,ne||(ne=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,le):e);var t}function de(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const i=()=>{e.removeEventListener("success",s),e.removeEventListener("error",r)},s=()=>{t(de(e.result)),i()},r=()=>{n(e.error),i()};e.addEventListener("success",s),e.addEventListener("error",r)}));return t.then((t=>{t instanceof IDBCursor&&se.set(t,e)})).catch((()=>{})),ce.set(t,e),t}(e);if(ae.has(e))return ae.get(e);const t=he(e);return t!==e&&(ae.set(e,t),ce.set(t,e)),t}const ue=e=>ce.get(e);function pe(e,t,{blocked:n,upgrade:i,blocking:s,terminated:r}={}){const o=indexedDB.open(e,t),a=de(o);return i&&o.addEventListener("upgradeneeded",(e=>{i(de(o.result),e.oldVersion,e.newVersion,de(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{r&&e.addEventListener("close",(()=>r())),s&&e.addEventListener("versionchange",(e=>s(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}const fe=["get","getKey","getAll","getAllKeys","count"],ge=["put","add","delete","clear"],me=new Map;function ve(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(me.get(t))return me.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,s=ge.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!s&&!fe.includes(n))return;const r=async function(e,...t){const r=this.transaction(e,s?"readwrite":"readonly");let o=r.store;return i&&(o=o.index(t.shift())),(await Promise.all([o[n](...t),s&&r.done]))[0]};return me.set(t,r),r}var ye;ye=le,le={...ye,get:(e,t,n)=>ve(e,t)||ye.get(e,t,n),has:(e,t)=>!!ve(e,t)||ye.has(e,t)};class we{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const be="@firebase/app",Ie="0.9.27",_e=new ee("@firebase/app"),Te="[DEFAULT]",Se={[be]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Ee=new Map,ke=new Map;function Ce(e,t){try{e.container.addComponent(t)}catch(n){_e.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Re(e){const t=e.name;if(ke.has(t))return _e.debug(`There were multiple attempts to register component ${t}.`),!1;ke.set(t,e);for(const t of Ee.values())Ce(t,e);return!0}function xe(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}const Pe=new x("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Ae{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new W("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Pe.create("app-deleted",{appName:this._name})}}const Oe="10.8.0";function Ne(e,t={}){let n=e;"object"!=typeof t&&(t={name:t});const i=Object.assign({name:Te,automaticDataCollectionEnabled:!1},t),s=i.name;if("string"!=typeof s||!s)throw Pe.create("bad-app-name",{appName:String(s)});if(n||(n=I()),!n)throw Pe.create("no-options");const r=Ee.get(s);if(r){if(A(n,r.options)&&A(i,r.config))return r;throw Pe.create("duplicate-app",{appName:s})}const o=new K(s);for(const e of ke.values())o.addComponent(e);const a=new Ae(n,i,o);return Ee.set(s,a),a}function Le(e=Te){const t=Ee.get(e);if(!t&&e===Te&&I())return Ne();if(!t)throw Pe.create("no-app",{appName:e});return t}function De(e,t,n){var i;let s=null!==(i=Se[e])&&void 0!==i?i:e;n&&(s+=`-${n}`);const r=s.match(/\s|\//),o=t.match(/\s|\//);if(r||o){const e=[`Unable to register library "${s}" with version "${t}":`];return r&&e.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&o&&e.push("and"),o&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void _e.warn(e.join(" "))}Re(new W(`${s}-version`,(()=>({library:s,version:t})),"VERSION"))}const Me="firebase-heartbeat-database",Ue=1,Be="firebase-heartbeat-store";let Fe=null;function je(){return Fe||(Fe=pe(Me,Ue,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Be)}catch(e){console.warn(e)}}}).catch((e=>{throw Pe.create("idb-open",{originalErrorMessage:e.message})}))),Fe}async function He(e,t){try{const n=(await je()).transaction(Be,"readwrite"),i=n.objectStore(Be);await i.put(t,Ve(e)),await n.done}catch(e){if(e instanceof R)_e.warn(e.message);else{const t=Pe.create("idb-set",{originalErrorMessage:null==e?void 0:e.message});_e.warn(t.message)}}}function Ve(e){return`${e.name}!${e.options.appId}`}class $e{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new ze(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=We();if((null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==i&&!this._heartbeatsCache.heartbeats.some((e=>e.date===i)))return this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=We(),{heartbeatsToSend:n,unsentEntries:i}=function(e,t=1024){const n=[];let i=e.slice();for(const s of e){const e=n.find((e=>e.agent===s.agent));if(e){if(e.dates.push(s.date),qe(n)>t){e.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),qe(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}(this._heartbeatsCache.heartbeats),s=y(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function We(){return(new Date).toISOString().substring(0,10)}class ze{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!k()&&C().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await je()).transaction(Be),n=await t.objectStore(Be).get(Ve(e));return await t.done,n}catch(e){if(e instanceof R)_e.warn(e.message);else{const t=Pe.create("idb-get",{originalErrorMessage:null==e?void 0:e.message});_e.warn(t.message)}}}(this.app);return(null==e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return He(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return He(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function qe(e){return y(JSON.stringify({version:2,heartbeats:e})).length}Re(new W("platform-logger",(e=>new we(e)),"PRIVATE")),Re(new W("heartbeat",(e=>new $e(e)),"PRIVATE")),De(be,Ie,""),De(be,Ie,"esm2017"),De("fire-js",""),De("firebase","10.8.0","app");const Ke="@firebase/installations",Ge="0.6.5",Je=1e4,Ye=`w:${Ge}`,Xe="FIS_v2",Ze="https://firebaseinstallations.googleapis.com/v1",Qe=36e5,et=new x("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function tt(e){return e instanceof R&&e.code.includes("request-failed")}function nt({projectId:e}){return`${Ze}/projects/${e}/installations`}function it(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}async function st(e,t){const n=(await t.json()).error;return et.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function rt({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}async function ot(e){const t=await e();return t.status>=500&&t.status<600?e():t}function at(e){return new Promise((t=>{setTimeout(t,e)}))}const ct=/^[cdef][\w-]{21}$/,lt="";function ht(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){var t;return(t=e,btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22)}(e);return ct.test(t)?t:lt}catch(e){return lt}}function dt(e){return`${e.appName}!${e.appId}`}const ut=new Map;function pt(e,t){const n=dt(e);ft(n,t),function(e,t){const n=(!gt&&"BroadcastChannel"in self&&(gt=new BroadcastChannel("[Firebase] FID Change"),gt.onmessage=e=>{ft(e.data.key,e.data.fid)}),gt);n&&n.postMessage({key:e,fid:t}),0===ut.size&&gt&&(gt.close(),gt=null)}(n,t)}function ft(e,t){const n=ut.get(e);if(n)for(const e of n)e(t)}let gt=null;const mt="firebase-installations-database",vt=1,yt="firebase-installations-store";let wt=null;function bt(){return wt||(wt=pe(mt,vt,{upgrade:(e,t)=>{0===t&&e.createObjectStore(yt)}})),wt}async function It(e,t){const n=dt(e),i=(await bt()).transaction(yt,"readwrite"),s=i.objectStore(yt),r=await s.get(n);return await s.put(t,n),await i.done,r&&r.fid===t.fid||pt(e,t.fid),t}async function _t(e){const t=dt(e),n=(await bt()).transaction(yt,"readwrite");await n.objectStore(yt).delete(t),await n.done}async function Tt(e,t){const n=dt(e),i=(await bt()).transaction(yt,"readwrite"),s=i.objectStore(yt),r=await s.get(n),o=t(r);return void 0===o?await s.delete(n):await s.put(o,n),await i.done,!o||r&&r.fid===o.fid||pt(e,o.fid),o}async function St(e){let t;const n=await Tt(e.appConfig,(n=>{const i=function(e){return Ct(e||{fid:ht(),registrationStatus:0})}(n),s=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine)return{installationEntry:t,registrationPromise:Promise.reject(et.create("app-offline"))};const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},i=async function(e,t){try{const n=await async function({appConfig:e,heartbeatServiceProvider:t},{fid:n}){const i=nt(e),s=rt(e),r=t.getImmediate({optional:!0});if(r){const e=await r.getHeartbeatsHeader();e&&s.append("x-firebase-client",e)}const o={fid:n,authVersion:Xe,appId:e.appId,sdkVersion:Ye},a={method:"POST",headers:s,body:JSON.stringify(o)},c=await ot((()=>fetch(i,a)));if(c.ok){const e=await c.json();return{fid:e.fid||n,registrationStatus:2,refreshToken:e.refreshToken,authToken:it(e.authToken)}}throw await st("Create Installation",c)}(e,t);return It(e.appConfig,n)}catch(n){throw tt(n)&&409===n.customData.serverCode?await _t(e.appConfig):await It(e.appConfig,{fid:t.fid,registrationStatus:0}),n}}(e,n);return{installationEntry:n,registrationPromise:i}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:Et(e)}:{installationEntry:t}}(e,i);return t=s.registrationPromise,s.installationEntry}));return n.fid===lt?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}async function Et(e){let t=await kt(e.appConfig);for(;1===t.registrationStatus;)await at(100),t=await kt(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=await St(e);return n||t}return t}function kt(e){return Tt(e,(e=>{if(!e)throw et.create("installation-not-found");return Ct(e)}))}function Ct(e){return 1===(t=e).registrationStatus&&t.registrationTime+Je<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}async function Rt({appConfig:e,heartbeatServiceProvider:t},n){const i=function(e,{fid:t}){return`${nt(e)}/${t}/authTokens:generate`}(e,n),s=function(e,{refreshToken:t}){const n=rt(e);return n.append("Authorization",function(e){return`${Xe} ${e}`}(t)),n}(e,n),r=t.getImmediate({optional:!0});if(r){const e=await r.getHeartbeatsHeader();e&&s.append("x-firebase-client",e)}const o={installation:{sdkVersion:Ye,appId:e.appId}},a={method:"POST",headers:s,body:JSON.stringify(o)},c=await ot((()=>fetch(i,a)));if(c.ok)return it(await c.json());throw await st("Generate Auth Token",c)}async function xt(e,t=!1){let n;const i=await Tt(e.appConfig,(i=>{if(!At(i))throw et.create("not-registered");const s=i.authToken;if(!t&&(2===(r=s).requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+Qe}(r)))return i;var r;if(1===s.requestStatus)return n=async function(e,t){let n=await Pt(e.appConfig);for(;1===n.authToken.requestStatus;)await at(100),n=await Pt(e.appConfig);const i=n.authToken;return 0===i.requestStatus?xt(e,t):i}(e,t),i;{if(!navigator.onLine)throw et.create("app-offline");const t=function(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}(i);return n=async function(e,t){try{const n=await Rt(e,t),i=Object.assign(Object.assign({},t),{authToken:n});return await It(e.appConfig,i),n}catch(n){if(!tt(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const n=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await It(e.appConfig,n)}else await _t(e.appConfig);throw n}}(e,t),t}}));return n?await n:i.authToken}function Pt(e){return Tt(e,(e=>{if(!At(e))throw et.create("not-registered");return 1===(t=e.authToken).requestStatus&&t.requestTime+Je<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e;var t}))}function At(e){return void 0!==e&&2===e.registrationStatus}function Ot(e){return et.create("missing-app-config-values",{valueName:e})}const Nt="installations";Re(new W(Nt,(e=>{const t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw Ot("App Configuration");if(!e.name)throw Ot("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw Ot(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:xe(t,"heartbeat"),_delete:()=>Promise.resolve()}}),"PUBLIC")),Re(new W("installations-internal",(e=>{const t=xe(e.getProvider("app").getImmediate(),Nt).getImmediate();return{getId:()=>async function(e){const t=e,{installationEntry:n,registrationPromise:i}=await St(t);return i?i.catch(console.error):xt(t).catch(console.error),n.fid}(t),getToken:e=>async function(e,t=!1){const n=e;return await async function(e){const{registrationPromise:t}=await St(e);t&&await t}(n),(await xt(n,t)).token}(t,e)}}),"PRIVATE")),De(Ke,Ge),De(Ke,Ge,"esm2017");const Lt="analytics",Dt="firebase_id",Mt="origin",Ut=6e4,Bt="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ft="https://www.googletagmanager.com/gtag/js",jt=new ee("@firebase/analytics"),Ht=new x("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Vt(e){if(!e.startsWith(Ft)){const t=Ht.create("invalid-gtag-resource",{gtagURL:e});return jt.warn(t.message),""}return e}function $t(e){return Promise.all(e.map((e=>e.catch((e=>e)))))}const Wt=30,zt=new class{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function qt(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function Kt(e,t=zt,n){const{appId:i,apiKey:s,measurementId:r}=e.options;if(!i)throw Ht.create("no-app-id");if(!s){if(r)return{measurementId:r,appId:i};throw Ht.create("no-api-key")}const o=t.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new Jt;return setTimeout((async()=>{a.abort()}),void 0!==n?n:Ut),Gt({appId:i,apiKey:s,measurementId:r},o,a,t)}async function Gt(e,{throttleEndTimeMillis:t,backoffCount:n},i,s=zt){var r;const{appId:o,measurementId:a}=e;try{await function(e,t){return new Promise(((n,i)=>{const s=Math.max(t-Date.now(),0),r=setTimeout(n,s);e.addEventListener((()=>{clearTimeout(r),i(Ht.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}(i,t)}catch(e){if(a)return jt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${null==e?void 0:e.message}]`),{appId:o,measurementId:a};throw e}try{const t=await async function(e){var t;const{appId:n,apiKey:i}=e,s={method:"GET",headers:qt(i)},r=Bt.replace("{app-id}",n),o=await fetch(r,s);if(200!==o.status&&304!==o.status){let e="";try{const n=await o.json();(null===(t=n.error)||void 0===t?void 0:t.message)&&(e=n.error.message)}catch(e){}throw Ht.create("config-fetch-failed",{httpStatus:o.status,responseMessage:e})}return o.json()}(e);return s.deleteThrottleMetadata(o),t}catch(t){const c=t;if(!function(e){if(!(e instanceof R&&e.customData))return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(c)){if(s.deleteThrottleMetadata(o),a)return jt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${null==c?void 0:c.message}]`),{appId:o,measurementId:a};throw t}const l=503===Number(null===(r=null==c?void 0:c.customData)||void 0===r?void 0:r.httpStatus)?V(n,s.intervalMillis,Wt):V(n,s.intervalMillis),h={throttleEndTimeMillis:Date.now()+l,backoffCount:n+1};return s.setThrottleMetadata(o,h),jt.debug(`Calling attemptFetch again in ${l} millis`),Gt(e,h,i,s)}}class Jt{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach((e=>e()))}}let Yt,Xt;async function Zt(e,t,n,i,s,r,o){var a;const c=Kt(e);c.then((t=>{n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&jt.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${t.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)})).catch((e=>jt.error(e))),t.push(c);const l=async function(){if(!k())return jt.warn(Ht.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await C()}catch(e){return jt.warn(Ht.create("indexeddb-unavailable",{errorInfo:null==e?void 0:e.toString()}).message),!1}return!0}().then((e=>e?i.getId():void 0)),[h,d]=await Promise.all([c,l]);(function(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes(Ft)&&n.src.includes(e))return n;return null})(r)||function(e,t){const n=function(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy("firebase-js-sdk-policy",t)),n}(0,{createScriptURL:Vt}),i=document.createElement("script"),s=`${Ft}?l=${e}&id=${t}`;i.src=n?null==n?void 0:n.createScriptURL(s):s,i.async=!0,document.head.appendChild(i)}(r,h.measurementId),Xt&&(s("consent","default",Xt),Xt=void 0),s("js",new Date);const u=null!==(a=null==o?void 0:o.config)&&void 0!==a?a:{};return u[Mt]="firebase",u.update=!0,null!=d&&(u[Dt]=d),s("config",h.measurementId,u),Yt&&(s("set",Yt),Yt=void 0),h.measurementId}class Qt{constructor(e){this.app=e}_delete(){return delete en[this.app.options.appId],Promise.resolve()}}let en={},tn=[];const nn={};let sn,rn,on="dataLayer",an=!1;function cn(e,t,n){!function(){const e=[];if(E()&&e.push("This is a browser extension environment."),"undefined"!=typeof navigator&&navigator.cookieEnabled||e.push("Cookies are not available."),e.length>0){const t=e.map(((e,t)=>`(${t+1}) ${e}`)).join(" "),n=Ht.create("invalid-analytics-context",{errorInfo:t});jt.warn(n.message)}}();const i=e.options.appId;if(!i)throw Ht.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw Ht.create("no-api-key");jt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=en[i])throw Ht.create("already-exists",{id:i});if(!an){!function(e){let t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(on);const{wrappedGtag:e,gtagCore:t}=function(e,t,n,i,s){let r=function(...e){window[i].push(arguments)};return window[s]&&"function"==typeof window[s]&&(r=window[s]),window[s]=function(e,t,n,i){return async function(s,...r){try{if("event"===s){const[i,s]=r;await async function(e,t,n,i,s){try{let r=[];if(s&&s.send_to){let e=s.send_to;Array.isArray(e)||(e=[e]);const i=await $t(n);for(const n of e){const e=i.find((e=>e.measurementId===n)),s=e&&t[e.appId];if(!s){r=[];break}r.push(s)}}0===r.length&&(r=Object.values(t)),await Promise.all(r),e("event",i,s||{})}catch(e){jt.error(e)}}(e,t,n,i,s)}else if("config"===s){const[s,o]=r;await async function(e,t,n,i,s,r){const o=i[s];try{if(o)await t[o];else{const e=(await $t(n)).find((e=>e.measurementId===s));e&&await t[e.appId]}}catch(e){jt.error(e)}e("config",s,r)}(e,t,n,i,s,o)}else if("consent"===s){const[t]=r;e("consent","update",t)}else if("get"===s){const[t,n,i]=r;e("get",t,n,i)}else if("set"===s){const[t]=r;e("set",t)}else e(s,...r)}catch(e){jt.error(e)}}}(r,e,t,n),{gtagCore:r,wrappedGtag:window[s]}}(en,tn,nn,on,"gtag");rn=e,sn=t,an=!0}return en[i]=Zt(e,tn,nn,t,sn,on,n),new Qt(e)}const ln="@firebase/analytics",hn="0.10.1";function dn(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(i=Object.getOwnPropertySymbols(e);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(n[i[s]]=e[i[s]])}return n}Re(new W(Lt,((e,{options:t})=>cn(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t)),"PUBLIC")),Re(new W("analytics-internal",(function(e){try{const t=e.getProvider(Lt).getImmediate();return{logEvent:(e,n,i)=>function(e,t,n,i){e=$(e),async function(e,t,n,i,s){if(s&&s.global)e("event",n,i);else{const s=await t;e("event",n,Object.assign(Object.assign({},i),{send_to:s}))}}(rn,en[e.app.options.appId],t,n,i).catch((e=>jt.error(e)))}(t,e,n,i)}}catch(e){throw Ht.create("interop-component-reg-failed",{reason:e})}}),"PRIVATE")),De(ln,hn),De(ln,hn,"esm2017"),Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError;const un=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},pn=new x("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),fn=new ee("@firebase/auth");function gn(e,...t){fn.logLevel<=J.ERROR&&fn.error(`Auth (${Oe}): ${e}`,...t)}function mn(e,...t){throw yn(e,...t)}function vn(e,...t){return yn(e,...t)}function yn(e,...t){if("string"!=typeof e){const n=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=e.name),e._errorFactory.create(n,...i)}return pn.create(e,...t)}function wn(e,t,...n){if(!e)throw yn(t,...n)}function bn(e){const t="INTERNAL ASSERTION FAILED: "+e;throw gn(t),new Error(t)}function In(e,t){e||bn(t)}function _n(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Tn(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class Sn{constructor(e,t){this.shortDelay=e,this.longDelay=t,In(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(S())||"object"==typeof navigator&&"ReactNative"===navigator.product}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&("http:"===Tn()||"https:"===Tn()||E()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function En(e,t){In(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class kn{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:"undefined"!=typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!=typeof fetch?fetch:void bn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:"undefined"!=typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!=typeof Headers?Headers:void bn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:"undefined"!=typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!=typeof Response?Response:void bn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Cn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Rn=new Sn(3e4,6e4);function xn(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Pn(e,t,n,i,s={}){return An(e,s,(async()=>{let s={},r={};i&&("GET"===t?r=i:s={body:JSON.stringify(i)});const o=N(Object.assign({key:e.config.apiKey},r)).slice(1),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),kn.fetch()(Nn(e,e.config.apiHost,n,o),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},s))}))}async function An(e,t,n){e._canInitEmulator=!1;const i=Object.assign(Object.assign({},Cn),t);try{const t=new Dn(e),s=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const r=await s.json();if("needConfirmation"in r)throw Mn(e,"account-exists-with-different-credential",r);if(s.ok&&!("errorMessage"in r))return r;{const t=s.ok?r.errorMessage:r.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Mn(e,"credential-already-in-use",r);if("EMAIL_EXISTS"===n)throw Mn(e,"email-already-in-use",r);if("USER_DISABLED"===n)throw Mn(e,"user-disabled",r);const a=i[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw function(e,t,n){const i=Object.assign(Object.assign({},un()),{[t]:n});return new x("auth","Firebase",i).create(t,{appName:e.name})}(e,a,o);mn(e,a)}}catch(t){if(t instanceof R)throw t;mn(e,"network-request-failed",{message:String(t)})}}async function On(e,t,n,i,s={}){const r=await Pn(e,t,n,i,s);return"mfaPendingCredential"in r&&mn(e,"multi-factor-auth-required",{_serverResponse:r}),r}function Nn(e,t,n,i){const s=`${t}${n}?${i}`;return e.config.emulator?En(e.config,s):`${e.config.apiScheme}://${s}`}function Ln(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Dn{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(vn(this.auth,"network-request-failed"))),Rn.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function Mn(e,t,n){const i={appName:e.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const s=vn(e,t,i);return s.customData._tokenResponse=n,s}function Un(e){return void 0!==e&&void 0!==e.enterprise}class Bn{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Ln(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}function Fn(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(e){}}function jn(e){return 1e3*Number(e)}function Hn(e){const[t,n,i]=e.split(".");if(void 0===t||void 0===n||void 0===i)return gn("JWT malformed, contained fewer than 3 sections"),null;try{const e=w(n);return e?JSON.parse(e):(gn("Failed to decode base64 JWT payload"),null)}catch(e){return gn("Caught error parsing JWT payload as JSON",null==e?void 0:e.toString()),null}}async function Vn(e,t,n=!1){if(n)return t;try{return await t}catch(t){throw t instanceof R&&function({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}(t)&&e.auth.currentUser===e&&await e.auth.signOut(),t}}class $n{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===(null==e?void 0:e.code)&&this.schedule(!0))}this.schedule()}}class Wn{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Fn(this.lastLoginAt),this.creationTime=Fn(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function zn(e){var t;const n=e.auth,i=await e.getIdToken(),s=await Vn(e,async function(e,t){return Pn(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:i}));wn(null==s?void 0:s.users.length,n,"internal-error");const r=s.users[0];e._notifyReloadListener(r);const o=(null===(t=r.providerUserInfo)||void 0===t?void 0:t.length)?r.providerUserInfo.map((e=>{var{providerId:t}=e,n=dn(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[],a=(c=e.providerData,l=o,[...c.filter((e=>!l.some((t=>t.providerId===e.providerId)))),...l]);var c,l;const h=e.isAnonymous,d=!(e.email&&r.passwordHash||(null==a?void 0:a.length)),u=!!h&&d,p={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new Wn(r.createdAt,r.lastLoginAt),isAnonymous:u};Object.assign(e,p)}class qn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){wn(e.idToken,"internal-error"),wn(void 0!==e.idToken,"internal-error"),wn(void 0!==e.refreshToken,"internal-error");const t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):function(e){const t=Hn(e);return wn(t,"internal-error"),wn(void 0!==t.exp,"internal-error"),wn(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e,t=!1){return wn(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:i,expiresIn:s}=await async function(e,t){const n=await An(e,{},(async()=>{const n=N({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:s}=e.config,r=Nn(e,i,"/v1/token",`key=${s}`),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",kn.fetch()(r,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,i,Number(s))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:i,expirationTime:s}=t,r=new qn;return n&&(wn("string"==typeof n,"internal-error",{appName:e}),r.refreshToken=n),i&&(wn("string"==typeof i,"internal-error",{appName:e}),r.accessToken=i),s&&(wn("number"==typeof s,"internal-error",{appName:e}),r.expirationTime=s),r}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new qn,this.toJSON())}_performRefresh(){return bn("not implemented")}}function Kn(e,t){wn("string"==typeof e||void 0===e,"internal-error",{appName:t})}class Gn{constructor(e){var{uid:t,auth:n,stsTokenManager:i}=e,s=dn(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new $n(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Wn(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await Vn(this,this.stsTokenManager.getToken(this.auth,e));return wn(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e,t=!1){const n=$(e),i=await n.getIdToken(t),s=Hn(i);wn(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const r="object"==typeof s.firebase?s.firebase:void 0,o=null==r?void 0:r.sign_in_provider;return{claims:s,token:i,authTime:Fn(jn(s.auth_time)),issuedAtTime:Fn(jn(s.iat)),expirationTime:Fn(jn(s.exp)),signInProvider:o||null,signInSecondFactor:(null==r?void 0:r.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=$(e);await zn(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(wn(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Gn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){wn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await zn(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Vn(this,async function(e,t){return Pn(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,i,s,r,o,a,c,l;const h=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(i=t.email)&&void 0!==i?i:void 0,u=null!==(s=t.phoneNumber)&&void 0!==s?s:void 0,p=null!==(r=t.photoURL)&&void 0!==r?r:void 0,f=null!==(o=t.tenantId)&&void 0!==o?o:void 0,g=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,m=null!==(c=t.createdAt)&&void 0!==c?c:void 0,v=null!==(l=t.lastLoginAt)&&void 0!==l?l:void 0,{uid:y,emailVerified:w,isAnonymous:b,providerData:I,stsTokenManager:_}=t;wn(y&&_,e,"internal-error");const T=qn.fromJSON(this.name,_);wn("string"==typeof y,e,"internal-error"),Kn(h,e.name),Kn(d,e.name),wn("boolean"==typeof w,e,"internal-error"),wn("boolean"==typeof b,e,"internal-error"),Kn(u,e.name),Kn(p,e.name),Kn(f,e.name),Kn(g,e.name),Kn(m,e.name),Kn(v,e.name);const S=new Gn({uid:y,auth:e,email:d,emailVerified:w,displayName:h,isAnonymous:b,photoURL:p,phoneNumber:u,tenantId:f,stsTokenManager:T,createdAt:m,lastLoginAt:v});return I&&Array.isArray(I)&&(S.providerData=I.map((e=>Object.assign({},e)))),g&&(S._redirectEventId=g),S}static async _fromIdTokenResponse(e,t,n=!1){const i=new qn;i.updateFromServerResponse(t);const s=new Gn({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await zn(s),s}}const Jn=new Map;function Yn(e){In(e instanceof Function,"Expected a class definition");let t=Jn.get(e);return t?(In(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Jn.set(e,t),t)}class Xn{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Xn.type="NONE";const Zn=Xn;function Qn(e,t,n){return`firebase:${e}:${t}:${n}`}class ei{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:i,name:s}=this.auth;this.fullUserKey=Qn(this.userKey,i.apiKey,s),this.fullPersistenceKey=Qn("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Gn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new ei(Yn(Zn),e,n);const i=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let s=i[0]||Yn(Zn);const r=Qn(n,e.config.apiKey,e.name);let o=null;for(const n of t)try{const t=await n._get(r);if(t){const i=Gn._fromJSON(e,t);n!==s&&(o=i),s=n;break}}catch(e){}const a=i.filter((e=>e._shouldAllowMigration));return s._shouldAllowMigration&&a.length?(s=a[0],o&&await s._set(r,o.toJSON()),await Promise.all(t.map((async e=>{if(e!==s)try{await e._remove(r)}catch(e){}}))),new ei(s,e,n)):new ei(s,e,n)}}function ti(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(ri(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(ni(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(ai(t))return"Blackberry";if(ci(t))return"Webos";if(ii(t))return"Safari";if((t.includes("chrome/")||si(t))&&!t.includes("edge/"))return"Chrome";if(oi(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null==n?void 0:n.length))return n[1]}return"Other"}function ni(e=S()){return/firefox\//i.test(e)}function ii(e=S()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function si(e=S()){return/crios\//i.test(e)}function ri(e=S()){return/iemobile/i.test(e)}function oi(e=S()){return/android/i.test(e)}function ai(e=S()){return/blackberry/i.test(e)}function ci(e=S()){return/webos/i.test(e)}function li(e=S()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function hi(e=S()){return li(e)||oi(e)||ci(e)||ai(e)||/windows phone/i.test(e)||ri(e)}function di(e,t=[]){let n;switch(e){case"Browser":n=ti(S());break;case"Worker":n=`${ti(S())}-${e}`;break;default:n=e}const i=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${Oe}/${i}`}class ui{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,i)=>{try{n(e(t))}catch(e){i(e)}}));n.onAbort=t,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(e){t.reverse();for(const e of t)try{e()}catch(e){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null==e?void 0:e.message})}}}class pi{constructor(e){var t,n,i,s;const r=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=r.minPasswordLength)&&void 0!==t?t:6,r.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=r.maxPasswordLength),void 0!==r.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=r.containsLowercaseCharacter),void 0!==r.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=r.containsUppercaseCharacter),void 0!==r.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=r.containsNumericCharacter),void 0!==r.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=r.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(i=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==i?i:"",this.forceUpgradeOnSignin=null!==(s=e.forceUpgradeOnSignin)&&void 0!==s&&s,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,i,s,r,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(i=a.containsLowercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(s=a.containsUppercaseLetter)||void 0===s||s),a.isValid&&(a.isValid=null===(r=a.containsNumericCharacter)||void 0===r||r),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let i=0;i<e.length;i++)n=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}class fi{constructor(e,t,n,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new mi(this),this.idTokenSubscription=new mi(this),this.beforeStateQueue=new ui(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=pn,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Yn(t)),this._initializationPromise=this.queue((async()=>{var n,i;if(!this._deleted&&(this.persistenceManager=await ei.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(e){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUser(e){var t;const n=await this.assertedPersistence.getCurrentUser();let i=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,r=null==i?void 0:i._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==r||!(null==o?void 0:o.user)||(i=o.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(e){i=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(e)))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return wn(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(e){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await zn(e)}catch(e){if("auth/network-request-failed"!==(null==e?void 0:e.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?$(e):null;return t&&wn(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&wn(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue((async()=>{await this.assertedPersistence.setPersistence(Yn(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e,t={}){return Pn(e,"GET","/v2/passwordPolicy",xn(e,t))}(this),t=new pi(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new x("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return Pn(e,"POST","/v2/accounts:revokeToken",xn(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Yn(e)||this._popupRedirectResolver;wn(t,this,"argument-error"),this.redirectPersistenceManager=await ei.create(this,[Yn(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,i){if(this._deleted)return()=>{};const s="function"==typeof t?t:t.next.bind(t);let r=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(wn(o,this,"internal-error"),o.then((()=>{r||s(this.currentUser)})),"function"==typeof t){const s=e.addObserver(t,n,i);return()=>{r=!0,s()}}{const n=e.addObserver(t);return()=>{r=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return wn(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=di(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null==t?void 0:t.error)&&function(e,...t){fn.logLevel<=J.WARN&&fn.warn(`Auth (${Oe}): ${e}`,...t)}(`Error while retrieving App Check token: ${t.error}`),null==t?void 0:t.token}}function gi(e){return $(e)}class mi{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new M(e,void 0);return n.subscribe.bind(n)}((e=>this.observer=e))}get next(){return wn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let vi={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function yi(e){return vi.loadJS(e)}function wi(e){return`__${e}${Math.floor(1e6*Math.random())}`}class bi{constructor(e){this.type="recaptcha-enterprise",this.auth=gi(e)}async verify(e="verify",t=!1){function n(t,n,i){const s=window.grecaptcha;Un(s)?s.enterprise.ready((()=>{s.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):i(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,i)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{(async function(e,t){return Pn(e,"GET","/v2/recaptchaConfig",xn(e,t))})(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((i=>{if(void 0!==i.recaptchaKey){const n=new Bn(i);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((s=>{if(!t&&Un(window.grecaptcha))n(s,e,i);else{if("undefined"==typeof window)return void i(new Error("RecaptchaVerifier is only supported in browser"));let t=vi.recaptchaEnterpriseScript;0!==t.length&&(t+=s),yi(t).then((()=>{n(s,e,i)})).catch((e=>{i(e)}))}})).catch((e=>{i(e)}))}))}}async function Ii(e,t,n,i=!1){const s=new bi(e);let r;try{r=await s.verify(n)}catch(e){r=await s.verify(n,!0)}const o=Object.assign({},t);return i?Object.assign(o,{captchaResp:r}):Object.assign(o,{captchaResponse:r}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function _i(e,t,n,i){var s;if(null===(s=e._getRecaptchaConfig())||void 0===s?void 0:s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await Ii(e,t,n,"getOobCode"===n);return i(e,s)}return i(e,t).catch((async s=>{if("auth/missing-recaptcha-token"===s.code){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const s=await Ii(e,t,n,"getOobCode"===n);return i(e,s)}return Promise.reject(s)}))}function Ti(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Si(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Ei{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return bn("not implemented")}_getIdTokenResponse(e){return bn("not implemented")}_linkToIdToken(e,t){return bn("not implemented")}_getReauthenticationResolver(e){return bn("not implemented")}}async function ki(e,t){return Pn(e,"POST","/v1/accounts:signUp",t)}async function Ci(e,t){return On(e,"POST","/v1/accounts:signInWithPassword",xn(e,t))}class Ri extends Ei{constructor(e,t,n,i=null){super("password",n),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new Ri(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new Ri(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return _i(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Ci);case"emailLink":return async function(e,t){return On(e,"POST","/v1/accounts:signInWithEmailLink",xn(e,t))}(e,{email:this._email,oobCode:this._password});default:mn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return _i(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ki);case"emailLink":return async function(e,t){return On(e,"POST","/v1/accounts:signInWithEmailLink",xn(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:mn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function xi(e,t){return On(e,"POST","/v1/accounts:signInWithIdp",xn(e,t))}class Pi extends Ei{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Pi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):mn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:i}=t,s=dn(t,["providerId","signInMethod"]);if(!n||!i)return null;const r=new Pi(n,i);return r.idToken=s.idToken||void 0,r.accessToken=s.accessToken||void 0,r.secret=s.secret,r.nonce=s.nonce,r.pendingToken=s.pendingToken||null,r}_getIdTokenResponse(e){return xi(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,xi(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,xi(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=N(t)}return e}}const Ai={USER_NOT_FOUND:"user-not-found"};class Oi extends Ei{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Oi({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Oi({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return On(e,"POST","/v1/accounts:signInWithPhoneNumber",xn(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await On(e,"POST","/v1/accounts:signInWithPhoneNumber",xn(e,t));if(n.temporaryProof)throw Mn(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return On(e,"POST","/v1/accounts:signInWithPhoneNumber",xn(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),Ai)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:i}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"==typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:i,temporaryProof:s}=e;return n||t||i||s?new Oi({verificationId:t,verificationCode:n,phoneNumber:i,temporaryProof:s}):null}}class Ni{constructor(e){var t,n,i,s,r,o;const a=L(D(e)),c=null!==(t=a.apiKey)&&void 0!==t?t:null,l=null!==(n=a.oobCode)&&void 0!==n?n:null,h=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=a.mode)&&void 0!==i?i:null);wn(c&&l&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=l,this.continueUrl=null!==(s=a.continueUrl)&&void 0!==s?s:null,this.languageCode=null!==(r=a.languageCode)&&void 0!==r?r:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=L(D(e)).link,n=t?L(D(t)).deep_link_id:null,i=L(D(e)).deep_link_id;return(i?L(D(i)).link:null)||i||n||t||e}(e);try{return new Ni(t)}catch(e){return null}}}class Li{constructor(){this.providerId=Li.PROVIDER_ID}static credential(e,t){return Ri._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Ni.parseLink(t);return wn(n,"argument-error"),Ri._fromEmailAndCode(e,n.code,n.tenantId)}}Li.PROVIDER_ID="password",Li.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Li.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Di{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Mi extends Di{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Ui extends Mi{constructor(){super("facebook.com")}static credential(e){return Pi._fromParams({providerId:Ui.PROVIDER_ID,signInMethod:Ui.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ui.credentialFromTaggedObject(e)}static credentialFromError(e){return Ui.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return Ui.credential(e.oauthAccessToken)}catch(e){return null}}}Ui.FACEBOOK_SIGN_IN_METHOD="facebook.com",Ui.PROVIDER_ID="facebook.com";class Bi extends Mi{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Pi._fromParams({providerId:Bi.PROVIDER_ID,signInMethod:Bi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Bi.credentialFromTaggedObject(e)}static credentialFromError(e){return Bi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return Bi.credential(t,n)}catch(e){return null}}}Bi.GOOGLE_SIGN_IN_METHOD="google.com",Bi.PROVIDER_ID="google.com";class Fi extends Mi{constructor(){super("github.com")}static credential(e){return Pi._fromParams({providerId:Fi.PROVIDER_ID,signInMethod:Fi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Fi.credentialFromTaggedObject(e)}static credentialFromError(e){return Fi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return Fi.credential(e.oauthAccessToken)}catch(e){return null}}}Fi.GITHUB_SIGN_IN_METHOD="github.com",Fi.PROVIDER_ID="github.com";class ji extends Mi{constructor(){super("twitter.com")}static credential(e,t){return Pi._fromParams({providerId:ji.PROVIDER_ID,signInMethod:ji.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ji.credentialFromTaggedObject(e)}static credentialFromError(e){return ji.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return ji.credential(t,n)}catch(e){return null}}}ji.TWITTER_SIGN_IN_METHOD="twitter.com",ji.PROVIDER_ID="twitter.com";class Hi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,i=!1){const s=await Gn._fromIdTokenResponse(e,n,i),r=Vi(n);return new Hi({user:s,providerId:r,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const i=Vi(n);return new Hi({user:e,providerId:i,_tokenResponse:n,operationType:t})}}function Vi(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class $i extends R{constructor(e,t,n,i){var s;super(t.code,t.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,$i.prototype),this.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,i){return new $i(e,t,n,i)}}function Wi(e,t,n,i){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw $i._fromErrorAndOperation(e,n,t,i);throw n}))}async function zi(e,t,n=!1){const i="signIn",s=await Wi(e,i,t),r=await Hi._fromIdTokenResponse(e,i,s);return n||await e._updateCurrentUser(r.user),r}new WeakMap;const qi="__sak";class Ki{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(qi,"1"),this.storage.removeItem(qi),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Gi extends Ki{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=S();return ii(e)||li(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=hi(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),i=this.localCache[t];n!==i&&e(t,i,n)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const i=this.storage.getItem(n);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const i=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},s=this.storage.getItem(n);!function(){const e=S();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()||10!==document.documentMode||s===e.newValue||e.newValue===e.oldValue?i():setTimeout(i,10)}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const e of Array.from(n))e(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Gi.type="LOCAL";const Ji=Gi;class Yi extends Ki{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Yi.type="SESSION";const Xi=Yi;class Zi{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new Zi(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:i,data:s}=t.data,r=this.handlersMap[i];if(!(null==r?void 0:r.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const o=Array.from(r).map((async e=>e(t.origin,s))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(e){return{fulfilled:!1,reason:e}}})))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Qi(e="",t=10){let n="";for(let e=0;e<t;e++)n+=Math.floor(10*Math.random());return e+n}Zi.receivers=[];class es{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const i="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,r;return new Promise(((o,a)=>{const c=Qi("",20);i.port1.start();const l=setTimeout((()=>{a(new Error("unsupported_event"))}),n);r={messageChannel:i,onMessage(e){const t=e;if(t.data.eventId===c)switch(t.data.status){case"ack":clearTimeout(l),s=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(s),o(t.data.response);break;default:clearTimeout(l),clearTimeout(s),a(new Error("invalid_response"))}}},this.handlers.add(r),i.port1.addEventListener("message",r.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[i.port2])})).finally((()=>{r&&this.removeMessageHandler(r)}))}}function ts(){return window}function ns(){return void 0!==ts().WorkerGlobalScope&&"function"==typeof ts().importScripts}const is="firebaseLocalStorageDb",ss="firebaseLocalStorage",rs="fbase_key";class os{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function as(e,t){return e.transaction([ss],t?"readwrite":"readonly").objectStore(ss)}function cs(){const e=indexedDB.open(is,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(ss,{keyPath:rs})}catch(e){n(e)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(ss)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(is);return new os(e).toPromise()}(),t(await cs()))}))}))}async function ls(e,t,n){const i=as(e,!0).put({[rs]:t,value:n});return new os(i).toPromise()}function hs(e,t){const n=as(e,!0).delete(t);return new os(n).toPromise()}class ds{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await cs()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(e){if(t++>3)throw e;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ns()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Zi._getInstance(ns()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new es(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){var t;if(this.sender&&this.activeServiceWorker&&((null===(t=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===t?void 0:t.controller)||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await cs();return await ls(e,qi,"1"),await hs(e,qi),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>ls(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=as(e,!1).get(t),i=await new os(n).toPromise();return void 0===i?null:i.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>hs(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=as(e,!1).getAll();return new os(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:i,value:s}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),t.push(i));for(const e of Object.keys(this.localCache))this.localCache[e]&&!n.has(e)&&(this.notifyListeners(e,null),t.push(e));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const e of Array.from(n))e(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}ds.type="LOCAL";const us=ds;wi("rcb"),new Sn(3e4,6e4);class ps{constructor(e){this.providerId=ps.PROVIDER_ID,this.auth=gi(e)}verifyPhoneNumber(e,t){return async function(e,t,n){var i;const s=await n.verify();try{let r;if(wn("string"==typeof s,e,"argument-error"),wn("recaptcha"===n.type,e,"argument-error"),r="string"==typeof t?{phoneNumber:t}:t,"session"in r){const t=r.session;if("phoneNumber"in r){wn("enroll"===t.type,e,"internal-error");const n=await function(e,t){return Pn(e,"POST","/v2/accounts/mfaEnrollment:start",xn(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:r.phoneNumber,recaptchaToken:s}});return n.phoneSessionInfo.sessionInfo}{wn("signin"===t.type,e,"internal-error");const n=(null===(i=r.multiFactorHint)||void 0===i?void 0:i.uid)||r.multiFactorUid;wn(n,e,"missing-multi-factor-info");const o=await function(e,t){return Pn(e,"POST","/v2/accounts/mfaSignIn:start",xn(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:s}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return Pn(e,"POST","/v1/accounts:sendVerificationCode",xn(e,t))}(e,{phoneNumber:r.phoneNumber,recaptchaToken:s});return t}}finally{n._reset()}}(this.auth,e,$(t))}static credential(e,t){return Oi._fromVerification(e,t)}static credentialFromResult(e){const t=e;return ps.credentialFromTaggedObject(t)}static credentialFromError(e){return ps.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:n}=e;return t&&n?Oi._fromTokenResponse(t,n):null}}ps.PROVIDER_ID="phone",ps.PHONE_SIGN_IN_METHOD="phone";class fs extends Ei{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return xi(e,this._buildIdpRequest())}_linkToIdToken(e,t){return xi(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return xi(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function gs(e){return zi(e.auth,new fs(e),e.bypassAuthState)}function ms(e){const{auth:t,user:n}=e;return wn(n,t,"internal-error"),async function(e,t,n=!1){const{auth:i}=e,s="reauthenticate";try{const r=await Vn(e,Wi(i,s,t,e),n);wn(r.idToken,i,"internal-error");const o=Hn(r.idToken);wn(o,i,"internal-error");const{sub:a}=o;return wn(e.uid===a,i,"user-mismatch"),Hi._forOperation(e,s,r)}catch(e){throw"auth/user-not-found"===(null==e?void 0:e.code)&&mn(i,"user-mismatch"),e}}(n,new fs(e),e.bypassAuthState)}async function vs(e){const{auth:t,user:n}=e;return wn(n,t,"internal-error"),async function(e,t,n=!1){const i=await Vn(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Hi._forOperation(e,"link",i)}(n,new fs(e),e.bypassAuthState)}class ys{constructor(e,t,n,i,s=!1){this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(e){this.reject(e)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:i,tenantId:s,error:r,type:o}=e;if(r)return void this.reject(r);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(e){this.reject(e)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return gs;case"linkViaPopup":case"linkViaRedirect":return vs;case"reauthViaPopup":case"reauthViaRedirect":return ms;default:mn(this.auth,"internal-error")}}resolve(e){In(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){In(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ws=new Sn(2e3,1e4);class bs extends ys{constructor(e,t,n,i,s){super(e,t,i,s),this.provider=n,this.authWindow=null,this.pollId=null,bs.currentPopupAction&&bs.currentPopupAction.cancel(),bs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return wn(e,this.auth,"internal-error"),e}async onExecution(){In(1===this.filter.length,"Popup operations only handle one event");const e=Qi();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(vn(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(vn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,bs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(vn(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,ws.get())};e()}}bs.currentPopupAction=null;const Is="pendingRedirect",_s=new Map;class Ts extends ys{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=_s.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=function(e){return Qn(Is,e.config.apiKey,e.name)}(t),i=function(e){return Yn(e._redirectPersistence)}(e);if(!await i._isAvailable())return!1;const s="true"===await i._get(n);return await i._remove(n),s}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}_s.set(this.auth._key(),e)}return this.bypassAuthState||_s.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Ss(e,t){_s.set(e._key(),t)}async function Es(e,t,n=!1){const i=gi(e),s=function(e,t){return t?Yn(t):(wn(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}(i,t),r=new Ts(i,s,n),o=await r.execute();return o&&!n&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,t)),o}class ks{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Rs(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Rs(e)){const i=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(vn(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Cs(e))}saveEventToCache(e){this.cachedEventUids.add(Cs(e)),this.lastProcessedEventTime=Date.now()}}function Cs(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function Rs({type:e,error:t}){return"unknown"===e&&"auth/no-auth-event"===(null==t?void 0:t.code)}const xs=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ps=/^https?/;function As(e){const t=_n(),{protocol:n,hostname:i}=new URL(t);if(e.startsWith("chrome-extension://")){const s=new URL(e);return""===s.hostname&&""===i?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&s.hostname===i}if(!Ps.test(n))return!1;if(xs.test(e))return i===e;const s=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}const Os=new Sn(3e4,6e4);function Ns(){const e=ts().___jsl;if(null==e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let t=0;t<e.CP.length;t++)e.CP[t]=null}function Ls(e){return new Promise(((t,n)=>{var i,s,r;function o(){Ns(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Ns(),n(vn(e,"network-request-failed"))},timeout:Os.get()})}if(null===(s=null===(i=ts().gapi)||void 0===i?void 0:i.iframes)||void 0===s?void 0:s.Iframe)t(gapi.iframes.getContext());else{if(!(null===(r=ts().gapi)||void 0===r?void 0:r.load)){const t=wi("iframefcb");return ts()[t]=()=>{gapi.load?o():n(vn(e,"network-request-failed"))},yi(`${vi.gapiScript}?onload=${t}`).catch((e=>n(e)))}o()}})).catch((e=>{throw Ds=null,e}))}let Ds=null;const Ms=new Sn(5e3,15e3),Us="__/auth/iframe",Bs="emulator/auth/iframe",Fs={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},js=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Hs(e){const t=e.config;wn(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?En(t,Bs):`https://${e.config.authDomain}/${Us}`,i={apiKey:t.apiKey,appName:e.name,v:Oe},s=js.get(e.config.apiHost);s&&(i.eid=s);const r=e._getFrameworks();return r.length&&(i.fw=r.join(",")),`${n}?${N(i).slice(1)}`}const Vs={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class $s{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}const Ws=encodeURIComponent("fac");async function zs(e,t,n,i,s,r){wn(e.config.authDomain,e,"auth-domain-config-required"),wn(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:i,v:Oe,eventId:s};if(t instanceof Di){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(r||{}))o[e]=t}if(t instanceof Mi){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const e of Object.keys(a))void 0===a[e]&&delete a[e];const c=await e._getAppCheckToken(),l=c?`#${Ws}=${encodeURIComponent(c)}`:"";return`${function({config:e}){return e.emulator?En(e,"emulator/auth/handler"):`https://${e.authDomain}/__/auth/handler`}(e)}?${N(a).slice(1)}${l}`}const qs="webStorageSupport",Ks=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Xi,this._completeRedirectFn=Es,this._overrideRedirectResult=Ss}async _openPopup(e,t,n,i){var s;return In(null===(s=this.eventManagers[e._key()])||void 0===s?void 0:s.manager,"_initialize() not called before _openPopup()"),function(e,t,n,i=500,s=600){const r=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const c=Object.assign(Object.assign({},Vs),{width:i.toString(),height:s.toString(),top:r,left:o}),l=S().toLowerCase();n&&(a=si(l)?"_blank":n),ni(l)&&(t=t||"http://localhost",c.scrollbars="yes");const h=Object.entries(c).reduce(((e,[t,n])=>`${e}${t}=${n},`),"");if(function(e=S()){var t;return li(e)&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}(l)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}(t||"",a),new $s(null);const d=window.open(t||"",a,h);wn(d,e,"popup-blocked");try{d.focus()}catch(e){}return new $s(d)}(e,await zs(e,t,n,_n(),i),Qi())}async _openRedirect(e,t,n,i){return await this._originValidation(e),s=await zs(e,t,n,_n(),i),ts().location.href=s,new Promise((()=>{}));var s}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(In(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await async function(e){const t=await function(e){return Ds=Ds||Ls(e),Ds}(e),n=ts().gapi;return wn(n,e,"internal-error"),t.open({where:document.body,url:Hs(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Fs,dontclear:!0},(t=>new Promise((async(n,i)=>{await t.restyle({setHideOnLeave:!1});const s=vn(e,"network-request-failed"),r=ts().setTimeout((()=>{i(s)}),Ms.get());function o(){ts().clearTimeout(r),n(t)}t.ping(o).then(o,(()=>{i(s)}))}))))}(e),n=new ks(e);return t.register("authEvent",(t=>(wn(null==t?void 0:t.authEvent,e,"invalid-auth-event"),{status:n.onEvent(t.authEvent)?"ACK":"ERROR"})),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(qs,{type:qs},(n=>{var i;const s=null===(i=null==n?void 0:n[0])||void 0===i?void 0:i[qs];void 0!==s&&t(!!s),mn(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e,t={}){return Pn(e,"GET","/v1/projects",t)}(e);for(const e of t)try{if(As(e))return}catch(e){}mn(e,"unauthorized-domain")}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return hi()||ii()||li()}};var Gs="@firebase/auth",Js="1.6.0";class Ys{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null==t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){wn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Xs=_("authIdTokenMaxAge")||300;let Zs=null;var Qs;vi={loadJS:e=>new Promise(((t,n)=>{const i=document.createElement("script");var s,r;i.setAttribute("src",e),i.onload=t,i.onerror=e=>{const t=vn("internal-error");t.customData=e,n(t)},i.type="text/javascript",i.charset="UTF-8",(null!==(r=null===(s=document.getElementsByTagName("head"))||void 0===s?void 0:s[0])&&void 0!==r?r:document).appendChild(i)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},Qs="Browser",Re(new W("auth",((e,{options:t})=>{const n=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:r,authDomain:o}=n.options;wn(r&&!r.includes(":"),"invalid-api-key",{appName:n.name});const a={apiKey:r,authDomain:o,clientPlatform:Qs,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:di(Qs)},c=new fi(n,i,s,a);return function(e,t){const n=(null==t?void 0:t.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Yn);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(i,null==t?void 0:t.popupRedirectResolver)}(c,t),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),Re(new W("auth-internal",(e=>(e=>new Ys(e))(gi(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),De(Gs,Js,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Qs)),De(Gs,Js,"esm2017"),function(e=Le()){const t=xe(e=$(e),Lt);t.isInitialized()?t.getImmediate():function(e,t={}){const n=xe(e,Lt);if(n.isInitialized()){const e=n.getImmediate();if(A(t,n.getOptions()))return e;throw Ht.create("already-initialized")}n.initialize({options:t})}(e)}(Ne({apiKey:"AIzaSyAWYD3cjmiGJfMW6U4qVEyzV-f2L2Bsdew",authDomain:"zuma-ca665.firebaseapp.com",projectId:"zuma-ca665",storageBucket:"zuma-ca665.appspot.com",messagingSenderId:"199514844710",appId:"1:199514844710:web:42a7fdb906f18aa7f540e7",measurementId:"G-5SQ2FBYWYR"}));const er=function(e=Le()){const t=xe(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=xe(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(A(n.getOptions(),null!=t?t:{}))return e;mn(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Ks,persistence:[us,Ji,Xi]}),i=_("authTokenSyncURL");if(i){const e=(s=i,async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>Xs)return;const i=null==t?void 0:t.token;Zs!==i&&(Zs=i,await fetch(s,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});!function(e,t,n){$(e).beforeAuthStateChanged(t,n)}(n,e,(()=>e(n.currentUser))),function(t,n,i,s){$(t).onIdTokenChanged((t=>e(t)),void 0,void 0)}(n)}var s;const r=(o="auth",null===(c=null===(a=b())||void 0===a?void 0:a.emulatorHosts)||void 0===c?void 0:c[o]);var o,a,c;return r&&function(e,t,n){const i=gi(e);wn(i._canInitEmulator,i,"emulator-config-failed"),wn(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const s=!!(null==n?void 0:n.disableWarnings),r=Ti(t),{host:o,port:a}=function(e){const t=Ti(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const e=s[1];return{host:e,port:Si(i.substr(e.length+1))}}{const[e,t]=i.split(":");return{host:e,port:Si(t)}}}(t),c=null===a?"":`:${a}`;i.config.emulator={url:`${r}//${o}${c}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:a,protocol:r.replace(":",""),options:Object.freeze({disableWarnings:s})}),s||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}(n,`http://${r}`),n}(),tr=n.p+"zuma_logo.png",nr=n.p+"error.png",ir=n.p+"blueBall.jpg",sr=n.p+"yellowBall.jpg",rr=n.p+"redBall.jpg",or=n.p+"greenBall.jpg",ar=n.p+"track.jpg",cr=n.p+"frog.png",lr={id:"main",title:"Main",render:(e="container")=>`\n\t\t<section class="${e} main">\n\t\t\t<h2 class="main-title">Welcome to the wonderful world of Zuma!</h2>\n\t\t</section>\n\t`},hr={id:"game",title:"Game",render:(e="container")=>`\n\t\t<section class="${e} game">\n\t\t\t<div class="game-field">\n\t\t\t\t<div class="game-score">SCORE: 0</div>\n\t\t\t\t<button class="sound-on" id="sound"></button>\n\t\t\t</div>\n\t\t\t<canvas id="canvas" class="${e}"></canvas>\n\t\t</section>\n\t`},dr={id:"rules",title:"Rules",render:(e="container")=>`\n\t\t<section class="${e} rules">\n\t\t<h2 class="rules-title">Rules game:</h2>\n\t\t<div class="rules-container">\n\t\t\t<p class="rules-text">The game "Zuma" is controlled with the mouse.</p>\n\t\t\t<p class="rules-text">The aim is the cursor.</p>\n\t\t\t<p class="rules-text">Shoot the balls with the left click, trying to get into groups of two or more balls of the same color.</p>\n\t\t</div>\n\t</section>\n\t`},ur={id:"records",title:"Records",render:(e="container")=>`\n\t\t<section class="${e} records">\n\t\t\t<h1 class="records-title">Records</h1>\n\t\t\t\t<table class="records-table">\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td colspan="2"></td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr class="top_five">\n\t\t\t\t\t\t<td></td>\n\t\t\t\t\t\t<td></td>\n\t\t\t\t\t</tr>\n\t\t\t\t</table>\n\t\t</section>\n\t`},pr={id:"error",title:"Error",render:(e="container")=>`\n\t\t<section class="${e} error">\n\t\t<img class="error-img" src="${nr}" alt="error 404">\n\t\t<p class="error-text"><span>404</span> Sorry this page not found, please try to return to the <a\n\t\t\t\thref="#main">main page</a>.</p>\n\t</section>\n\t`};let fr={levelBg:ar,ballsColor:[ir,sr,rr,or],offsetFrogLeft:2.9,offsetFrogTop:2.5,totalBalls:140,points:[{x:1179,y:1e3},{x:1179,y:556},{x:1168,y:387},{x:1144,y:276},{x:1102,y:188},{x:1055,y:129},{x:1020,y:103},{x:937,y:69},{x:843,y:61},{x:721,y:74},{x:562,y:117},{x:455,y:162},{x:346,y:219},{x:245,y:289},{x:148,y:384},{x:86,y:475},{x:68,y:547},{x:79,y:580},{x:116,y:625},{x:177,y:671},{x:258,y:703},{x:364,y:724},{x:460,y:735},{x:574,y:735},{x:686,y:737},{x:767,y:728},{x:849,y:713},{x:928,y:685},{x:994,y:641},{x:1046,y:575},{x:1060,y:510},{x:1061,y:422},{x:1056,y:361},{x:1035,y:290},{x:1008,y:226},{x:977,y:192},{x:964,y:184},{x:950,y:200},{x:920,y:281},{x:888,y:369},{x:836,y:493},{x:797,y:562},{x:748,y:604},{x:683,y:634},{x:608,y:651},{x:521,y:649},{x:429,y:636},{x:360,y:620},{x:284,y:574},{x:246,y:522},{x:241,y:489},{x:267,y:432},{x:306,y:390},{x:372,y:339},{x:455,y:285},{x:544,y:230},{x:638,y:180},{x:704,y:155},{x:746,y:148},{x:768,y:160},{x:772,y:172},{x:757,y:236}]};class gr{step;point0;point1;point2;ax;ay;bx;by;A;B;C;totalLength;init(e,t,n,i){return this.point0=e,this.point1=t,this.point2=n,this.ax=this.point0.x-2*this.point1.x+this.point2.x,this.ay=this.point0.y-2*this.point1.y+this.point2.y,this.bx=2*this.point1.x-2*this.point0.x,this.by=2*this.point1.y-2*this.point0.y,this.A=4*(Math.pow(this.ax,2)+Math.pow(this.ay,2)),this.B=4*(this.ax*this.bx+this.ay*this.by),this.C=Math.pow(this.bx,2)+Math.pow(this.by,2),this.totalLength=this.length(1),this.step=Math.floor(this.totalLength/i),this.totalLength%i>i/2&&this.step++,this.step}speed(e){return Math.sqrt(this.A*e*e+this.B*e+this.C)}length(e){let t=Math.sqrt(this.C+e*(this.B+this.A*e)),n=2*this.A*e*t+this.B*(t-Math.sqrt(this.C)),i=Math.log(this.B+2*Math.sqrt(this.A)*Math.sqrt(this.C)),s=Math.log(this.B+2*this.A*e+2*Math.sqrt(this.A)*t);return(2*Math.sqrt(this.A)*n+(this.B*this.B-4*this.A*this.C)*(i-s))/(8*Math.pow(this.A,1.5))}invertL(e,t){let n,i=e;for(;n=i-(this.length(i)-t)/this.speed(i),!(Math.abs(i-n)<1e-6);)i=n;return n}getPoint(e,t){return{x:e,y:t}}getAnchorPoint(e){if(e>=0&&e<=this.step){let t=e/this.step,n=t*this.totalLength;t=this.invertL(t,n);let i=Math.pow(1-t,2)*this.point0.x+2*(1-t)*t*this.point1.x+t*t*this.point2.x,s=Math.pow(1-t,2)*this.point0.y+2*(1-t)*t*this.point1.y+t*t*this.point2.y,r=this.getPoint((1-t)*this.point0.x+t*this.point1.x,(1-t)*this.point0.y+t*this.point1.y),o=this.getPoint((1-t)*this.point1.x+t*this.point2.x,(1-t)*this.point1.y+t*this.point2.y),a=o.x-r.x,c=o.y-r.y;return{x:i,y:s,degrees:180*Math.atan2(c,a)/Math.PI}}return{}}}class mr{constructor(){this.track=[]}getPoint(e,t){return{x:e,y:t}}getPoints(){let e=fr.points,t=new gr;for(let n=0;n<e.length-2;++n){let i=0===n?this.getPoint(e[0].x,e[0].y):this.getPoint((e[n].x+e[n+1].x)/2,(e[n].y+e[n+1].y)/2),s=this.getPoint(e[n+1].x,e[n+1].y),r=n<=e.length-4?this.getPoint((e[n+1].x+e[n+2].x)/2,(e[n+1].y+e[n+2].y)/2):this.getPoint(e[n+2].x,e[n+2].y),o=t.init(i,s,r,1);for(let e=1;e<=o;++e){let n=t.getAnchorPoint(e);this.track.push(n)}}}getTrack(){return this.getPoints(),this.track}}class vr{constructor(){this.track=(new mr).getTrack(),this.levelBg=fr.levelBg,this.colors=fr.ballsColor,this.totalBalls=fr.totalBalls,this.ratio=4/3,this.canvasWidth=600,this.canvasHeight=400,this.frog=this.createFrog(),this.shot=this.createShot(),this.ballRadius=this.createBall(),this.track=this.createTrack()}createBall(){return this.canvasWidth/70}createShot(){return{radius:this.canvasWidth/70,left:this.canvasWidth/fr.offsetFrogLeft+this.canvasWidth/6.15/2,top:this.canvasHeight/fr.offsetFrogTop+this.canvasWidth/6.15/2}}createFrog(){return{width:this.canvasWidth/6.15,height:this.canvasWidth/6.15,left:this.canvasWidth/fr.offsetFrogLeft,top:this.canvasHeight/fr.offsetFrogTop}}createTrack(){let e=this.track,t=this.canvasWidth/1280,n=this.canvasHeight/820,i=[];for(let s=0;s<e.length;s++)i.push({x:e[s].x*t,y:e[s].y*n});return i}}class yr{constructor(e){this.model=e,this.context=document.getElementById("canvas").getContext("2d")}createCanvas(){let e=document.getElementById("canvas");e.width=this.model.canvasWidth,e.height=this.model.canvasHeight}draw(){let e=new Image;e.src=this.model.levelBg,this.context.drawImage(e,0,0,this.model.canvasWidth,this.model.canvasHeight)}}n.p;const wr=n.p+"main.mp3",br=(n.p,n.p+"fireball.mp3");n.p,n.p,n.p;class Ir extends vr{constructor(){super(),this.frogAngle=0,this.shotSpeed=0,this.shotAngle=0,this.shotState=0,this.down=0,this.shotRadius=this.shot.radius,this.shotLeft=this.shot.left,this.shotTop=this.shot.top,this.color=0,this.canShoot=!1,this.secondShotLeft=this.shot.left,this.secondShotTop=this.shot.top,this.secondShotColor=0,this.frogWidth=this.frog.width,this.frogHeight=this.frog.height,this.frogLeft=this.frog.left,this.frogTop=this.frog.top,this.getRandomColor(),this.getRandomSecondShotColor()}getRandomColor(){let e=Math.floor(Math.random()*this.colors.length);this.color=this.colors[e]}getRandomSecondShotColor(){let e=Math.floor(Math.random()*this.colors.length);this.secondShotColor=this.colors[e]}updateFrogAngle(e,t){this.frogAngle=Math.atan2(-(e-(this.frogLeft+this.frogWidth/2)),t-(this.frogTop+this.frogHeight/2))}updateShotAngle(e,t){this.shotAngle=Math.atan2(e-(this.frogLeft+this.frogWidth/2),t-(this.frogTop+this.frogHeight/2))}updateShot(){this.shotLeft+=Math.sin(this.shotAngle)*this.shotSpeed,this.shotTop+=Math.cos(this.shotAngle)*this.shotSpeed}stopShot(){this.shotState=0,this.shotSpeed=0,this.shotAngle=-this.frogAngle,this.shotLeft=this.frogLeft+this.frogWidth/2,this.shotTop=this.frogTop+this.frogHeight/2,this.down=0,this.color=this.secondShotColor,this.getRandomSecondShotColor(),1===this.colors.length&&(this.color=this.secondShotColor,this.getRandomSecondShotColor())}restartShot(){this.shotSpeed=0,this.shotState=0,this.shotAngle=-this.frogAngle,this.shotLeft=this.frogLeft+this.frogWidth/2,this.shotTop=this.frogTop+this.frogHeight/2,this.color=this.secondShotColor,this.getRandomSecondShotColor()}}class _r extends yr{frame=0;numberOfRows=10;numberOfCols=6;tickPerFrame=1;tickCount=0;spriteWidth=300;spriteHeight=180;rowCount=0;constructor(e){super(),this.model=e,this.color=this.model.color,this.secondColor=this.model.secondShotColor}drawFrog(){let e=new Image;e.src=cr,this.context.save(),this.context.beginPath(),this.context.arc(this.model.frogLeft+this.model.frogWidth/2,this.model.frogTop+this.model.frogHeight/2,this.model.frogWidth/2,0,2*Math.PI,!1),this.context.closePath(),this.context.clip(),this.context.translate(this.model.frogLeft+this.model.frogWidth/2,this.model.frogTop+this.model.frogHeight/2),this.context.rotate(this.model.frogAngle),this.context.drawImage(e,-this.model.frogWidth/2,-this.model.frogHeight/2,this.model.frogWidth,this.model.frogHeight),this.context.restore()}drawShot(){let e=new Image;e.src=this.color,this.context.save(),this.context.beginPath(),this.context.arc(this.model.frogLeft+this.model.frogWidth/2,this.model.frogTop+this.model.frogHeight/2,this.model.frogWidth/2,0,2*Math.PI,!1),this.context.closePath(),this.context.translate(this.model.shotLeft,this.model.shotTop),this.context.rotate(-this.model.shotAngle),this.context.beginPath(),this.context.arc(0,this.model.frogHeight/4,this.model.shotRadius,0,2*Math.PI,!0),this.context.closePath(),this.context.clip(),this.animateColor(e),this.context.restore()}animateColor(e){this.context.translate(0,0),this.context.drawImage(e,this.frame*this.spriteWidth/this.numberOfRows,this.rowCount*this.spriteHeight/this.numberOfCols,this.spriteWidth/this.numberOfRows,this.spriteHeight,-this.model.shotRadius,-this.model.shotRadius+this.model.frogHeight/4,2*this.model.shotRadius*10/this.numberOfRows,2*this.model.shotRadius*6),this.tickCount>this.tickPerFrame&&(this.tickCount=0,this.frame===this.numberOfRows-1&&this.rowCount++,6===this.rowCount&&(this.rowCount=0),this.frame=this.frame<this.numberOfRows-1?this.frame+=1:this.frame=0),this.tickCount++}drawSecondBall(){let e=new Image;e.src=this.secondColor,this.context.save(),this.context.beginPath(),this.context.arc(this.model.frogLeft+this.model.frogWidth/2,this.model.frogTop+this.model.frogHeight/2,this.model.frogWidth/2+2,0,2*Math.PI,!1),this.context.closePath(),this.context.translate(this.model.secondShotLeft,this.model.secondShotTop),this.context.rotate(this.model.frogAngle),this.context.beginPath(),this.context.arc(0,-this.model.frogHeight/5,this.model.shotRadius/2+1,0,2*Math.PI,!1),this.context.closePath(),this.context.clip(),this.context.fill(),this.context.translate(0,0),this.context.drawImage(e,0,0,30,30,-this.model.shotRadius/2-2,-this.model.frogHeight/5-this.model.shotRadius/2-1,this.model.shotRadius+3,this.model.shotRadius+3),this.context.restore()}draw(){this.drawFrog(),this.drawShot(),this.drawSecondBall()}}class Tr{constructor(){this.model=new Ir,this.view=new _r(this.model),this.moveFrog(),this.shot(),this.swapColor()}moveFrog(){let e=document.getElementById("canvas");e.addEventListener("mousemove",(t=>{let n=t.clientX-e.getBoundingClientRect().x,i=t.clientY-e.getBoundingClientRect().y;this.model.updateFrogAngle(n,i),0===this.model.shotState&&this.model.updateShotAngle(n,i)}))}shot(){document.getElementById("canvas").addEventListener("click",(e=>{this.model.shotSpeed=this.model.frogWidth/10,this.model.shotState=1,this.fireSound().play()}))}fireSound(){let e=new Audio;return e.src=br,e}restartShot(){let e=document.getElementById("canvas"),t=e.offsetWidth,n=e.offsetHeight;(this.model.shotLeft-this.model.shotRadius<e.offsetLeft-t||this.model.shotTop-this.model.shotRadius<e.offsetTop-n||this.model.shotLeft+this.model.shotRadius>e.offsetWidth||this.model.shotTop+this.model.shotRadius>e.offsetHeight)&&(this.model.restartShot(),this.view.secondColor=this.model.secondShotColor,this.view.color=this.model.color)}stopShot(){1===this.model.down&&(this.model.stopShot(),this.view.secondColor=this.model.secondShotColor,this.view.color=this.model.color)}swapColor(){window.oncontextmenu=function(e){return!1},window.addEventListener("mousedown",(e=>{if(2===e.button){let e=this.model.color,t=this.model.secondShotColor;this.model.color=t,this.model.secondShotColor=e,this.view.color=t,this.view.secondColor=e}}))}draw(){this.stopShot(),this.restartShot(),this.view.draw(),this.model.updateShot()}}class Sr extends vr{constructor(){super(),this.trackSection=0,this.ballsColor=this.colors,this.width=this.canvasWidth,this.height=this.canvasHeight,this.color=0,this.getRandomColor()}createPosition(e){this.trackSection=e,this.x=this.track[this.trackSection].x,this.y=this.track[this.trackSection].y}getRandomColor(){let e=Math.floor(Math.random()*this.colors.length);this.color=this.colors[e]}getTrackSection(){return this.trackSection}updateSize(e,t){this.ballRadius=e/63;let n=this.track,i=e/this.width,s=t/this.height,r=[];for(let e=0;e<n.length;e++)r.push({x:n[e].x*i,y:n[e].y*s});r.length===this.track.length&&(this.track=r,this.width=e,this.height=t)}update(e){let t=this.trackSection+e;this.createPosition(t)}}class Er extends yr{frame=0;numberOfRows=10;numberOfCols=6;tickPerFrame=1;tickCount=0;spriteWidth=300;spriteHeight=180;rowCount=0;constructor(e){super(),this.model=e,this.color=this.model.color}drawBall(){let e=new Image;e.src=this.color,this.context.save(),this.context.beginPath(),this.context.arc(this.model.x,this.model.y,this.model.ballRadius,0,2*Math.PI,!1),this.context.closePath(),this.context.clip(),this.animateColor(e),this.context.restore()}animateColor(e){this.context.translate(this.model.x-this.model.ballRadius,this.model.y-this.model.ballRadius),this.context.drawImage(e,this.frame*this.spriteWidth/this.numberOfRows,this.rowCount*this.spriteHeight/this.numberOfCols,this.spriteWidth/this.numberOfRows,this.spriteHeight,0,0,2*this.model.ballRadius*10/this.numberOfRows,2*this.model.ballRadius*6),this.tickCount>this.tickPerFrame&&(this.tickCount=0,this.frame===this.numberOfRows-1&&this.rowCount++,6===this.rowCount&&(this.rowCount=0),this.frame=this.frame<this.numberOfRows-1?this.frame+=1:this.frame=0),this.tickCount++}draw(){this.drawBall()}}class kr{constructor(){this.score=0}updateGameScore(){document.querySelector(".game-score").textContent=`SCORE : ${this.score}`}}class Cr{constructor(e,t){this.frog=t,this.totalBalls=e,this.player=new kr,this.balls=[],this.spacing=36,this.track=[],this.views=[],this.createFirstBall(),this.gameEnd=!1,this.ballNeedShift=!1,this.shiftedBalls=[],this.ballCounter=0,this.currentCombo=0,this.maxCombo=0,this.multiplierCombo=1,this.comboCounter=0,this.checkUnload(),this.music=this.createMusic()}createFirstBall(){let e=this.createRandomBall(),t=new Er(e);this.views.unshift(t),this.balls.unshift(e),e.createPosition(this.spacing),this.track=e.track}createBalls(){if(0!==this.balls.length&&(this.pushNextBall(0,1),this.balls[0].getTrackSection()===2*this.spacing&&0!==this.totalBalls&&this.totalBalls>0)){let e=this.createRandomBall(),t=new Er(e);this.views.unshift(t),this.balls.unshift(e),e.createPosition(this.spacing)}}createRandomBall(){return this.totalBalls--,this.ballCounter++,new Sr}pushBall(e,t){let n;for(let e=0;e<this.balls.length;e++){if(this.balls[e].trackSection>t){n=e;break}e===this.balls.length-1&&(n=e+1)}e.createPosition(t),this.balls.splice(n,0,e),this.frog.colors=this.checkColor();let i=new Er(e);this.views.splice(n,0,i),this.balls[n-1]&&this.balls[n-1].color===this.balls[n].color&&this.balls[n].getTrackSection()-this.balls[n-1].getTrackSection()>this.spacing+1&&this.addShiftedBall(e),this.balls[n+1]&&this.balls[n+1].color===this.balls[n].color&&this.balls[n+1].getTrackSection()-this.balls[n].getTrackSection()>this.spacing+1&&this.addShiftedBall(this.balls[n+1]),this.checkTail(n,!0)}pushNextBall(e,t){let n=[];n.push(this.balls[e]);for(let t=e;t<this.balls.length-1&&this.balls[t+1].getTrackSection()-this.balls[t].getTrackSection()<=this.spacing;t++)this.balls[t+1].getTrackSection()-this.balls[t].getTrackSection()<this.spacing&&this.balls[t+1].update(4),n.push(this.balls[t+1]);for(let e=this.balls.length-1;e>0;e--)this.balls[e].getTrackSection()-this.balls[e-1].getTrackSection()<this.spacing&&this.balls[e].update(4);for(let e=0;e<n.length;e++)n[e].update(t);this.balls[this.balls.length-1].getTrackSection()>=this.track.length-this.spacing&&(this.balls.splice(this.balls.length-2,1),2===this.balls.length&&(this.gameEnd=!0,this.frog.canShoot=0,this.music.main.pause()),this.gameEnd&&setTimeout((()=>{}),500))}checkCollision(e){for(let t=0;t<this.balls.length;t++){let n=this.balls[t].x-e.x,i=this.balls[t].y-e.y;if(Math.sqrt(n*n+i*i)<=2*this.balls[t].ballRadius)return this.frog.down=1,t}return-1}checkPosition(e,t,n){let i;"next"===n?i=this.balls[t].getTrackSection():"previous"===n&&(i=this.balls[t].getTrackSection()-this.spacing),this.pushBall(e,i)}checkColor(){let e=[];for(let t=0;t<this.balls.length;t++)e.push(this.balls[t].color);return Array.from(new Set(e))}checkTail(e,t){let n=[];n.push(this.balls[e]);let i=this.balls[e].color,s=e+1;for(;this.balls[s]&&this.balls[s].color===i;)if(this.balls[s].getTrackSection()-this.balls[s-1].getTrackSection()<=this.spacing+1)n.push(this.balls[s]),s++;else{if(t)break;n.push(this.balls[s]),s++}let r=e-1;for(;this.balls[r]&&this.balls[r].color===i;)if(this.balls[r+1].getTrackSection()-this.balls[r].getTrackSection()<=this.spacing+1)n.push(this.balls[r]),r--;else{if(t)break;n.push(this.balls[r]),r--}return r++,n.length>2&&t&&this.clearBalls(r,n),n.length}clearBalls(e,t){this.currentCombo++,this.checkWinGame(t);let n=0;for(let e=0;e<t.length;e++)n+=10+this.frog.level;n*=this.multiplierCombo*this.frog.level,this.player.score+=n,this.balls.splice(e,t.length),this.views.splice(e,t.length),this.gameEnd||(this.frog.colors=this.checkColor()),this.balls[e-1]&&this.balls[e]&&this.balls[e-1].color===this.balls[e].color?(this.checkTail(e,!1)<3&&(this.currentCombo>this.maxCombo&&(this.maxCombo=this.currentCombo),this.comboCounter+=this.currentCombo,this.currentCombo=0),this.addShiftedBall(this.balls[e])):(this.currentCombo>this.maxCombo&&(this.maxCombo=this.currentCombo),this.comboCounter+=this.currentCombo,this.currentCombo=0)}checkWinGame(e){if(this.balls.length===e.length){this.gameEnd=!0,this.music.main.pause(),this.frog.canShoot=0,this.player.getExtraScore(this.track,this.balls[this.balls.length-1].getTrackSection(),this.frog.level);let e=localStorage.getItem("level"),t=this.frog.level+1;t<e?localStorage.setItem("level",e):t>e&&this.frog.level<9&&localStorage.setItem("level",String(t)),setTimeout((()=>{this.player.checkScore(this.player.score),this.player.nextLevel("win",this.frog.level,this.ballCounter,this.player.score)}),5e3)}}addShiftedBall(e){null===this.shiftedBalls?(this.shiftedBalls=[],this.shiftedBalls.push(e)):this.shiftedBalls.push(e),setTimeout((()=>{this.ballNeedShift=!0,this.music.shifted.currentTime=0,this.music.shifted.play()}),100)}shiftOfTwoTails(){if(0!==this.shiftedBalls.length)for(let e=0;e<this.shiftedBalls.length;e++){let t=this.balls.indexOf(this.shiftedBalls[e]);if(-1!==t&&this.balls[t-1])if(this.shiftedBalls[e].color===this.balls[t-1].color){let n;n=this.shiftedBalls[e].getTrackSection()-this.balls[t-1].getTrackSection()>this.spacing+2?3:10,this.pushNextBall(t,-n),this.shiftedBalls[e].getTrackSection()-this.balls[t-1].getTrackSection()<=this.spacing&&(this.multiplierCombo++,this.shiftedBalls.splice(e,1),this.checkTail(t-1,!0),0===this.shiftedBalls.length&&(this.ballNeedShift=!1,this.multiplierCombo=1))}else this.shiftedBalls.splice(e,1),this.currentCombo>this.maxCombo&&(this.maxCombo=this.currentCombo),this.comboCounter+=this.currentCombo,this.currentCombo=0}else this.ballNeedShift=!1,this.multiplierCombo=1}shooting(){if(1===this.frog.shotState){let e=this.checkCollision({x:this.frog.shotLeft,y:this.frog.shotTop});if(-1!==e){let t=this.track[this.balls[e].getTrackSection()-Math.ceil(this.balls[e].ballRadius)].x,n=this.track[this.balls[e].getTrackSection()-Math.ceil(this.balls[e].ballRadius)].y,i=Math.sqrt((this.frog.shotLeft-t)*(this.frog.shotLeft-t)+(this.frog.shotTop-n)*(this.frog.shotTop-n)),s=this.track[this.balls[e].getTrackSection()+Math.ceil(this.balls[e].ballRadius)].x,r=this.track[this.balls[e].getTrackSection()+Math.ceil(this.balls[e].ballRadius)].y,o=(i=Math.sqrt((this.frog.shotLeft-s)*(this.frog.shotLeft-s)+(this.frog.shotTop-r)*(this.frog.shotTop-r)))?"next":"previous",a=this.createRandomBall();a.color=this.frog.color,this.checkPosition(a,e,o)}}}draw(){if(this.player.updateGameScore(),this.ballNeedShift&&this.shiftOfTwoTails(),this.shooting(),!this.gameEnd){this.gameEnd||(this.frog.canShoot=1,this.createBalls());for(let e=0;e<this.balls.length;e++)this.views[e].draw()}}checkUnload(){window.addEventListener("beforeunload",(e=>{this.gameEnd||"#Game"!==location.hash||(e.returnValue="Ваш прогресс не будет сохранен. Вы уверены что хотите покинуть игру?",e.returnValue&&window.location.reload())})),window.addEventListener("popstate",(e=>{"#Play"!==location.hash||this.gameEnd||(confirm("Ваш прогресс не будет сохранен. Вы уверены что хотите покинуть игру?")?window.location.reload():location.hash="#Game")}))}createMusic(){let e={},t=new Audio;t.src=wr,t.play(),t.loop=!0;let n=new Audio;return n.src=br,e.main=t,e.shifted=n,e}}class Rr{constructor(){this.game=new vr,this.view=new yr(this.game),this.frogController=new Tr,this.ballController=new Cr(this.game.totalBalls,this.frogController.model),this.view.createCanvas()}draw(){this.view.draw(),this.frogController.draw(),this.ballController.draw()}}const xr=function(){function e(){let e=null,t=null,n=null,i=null;const s={main:lr,game:hr,rules:dr,records:ur,error:pr};this.init=function(s){e=s,t=e.querySelector("#menu"),n=e.querySelector("#content"),i=document.querySelector("#sound")},this.updateButtons=function(e){const n=t.querySelectorAll(".mainmenu__link"),i=`#${e}`;for(let e of n)i===e.getAttribute("href")?e.classList.add("active"):e.classList.remove("active")},this.renderContent=function(e){let t="default";e.length>0&&(t=e in s?e:"error"),window.document.title=s[t].title,n.innerHTML=s[t].render(`${t}-page`),this.updateButtons(s[t].id)},this.play=function(){let e=new Rr;requestAnimationFrame((function t(n){e.draw(),requestAnimationFrame(t)}))}}function t(){let e=null;this.init=function(t){e=t},this.updateState=function(t){e.renderContent(t)},this.startGame=function(){e.play()}}function n(){let e=null,t=null;this.init=function(n,i){e=n,t=i,window.addEventListener("hashchange",this.updateState),this.updateState(),this.addEventListeners()},this.updateState=function(){const e=location.hash.slice(1).toLowerCase();t.updateState(e)},this.addEventListeners=function(){document.addEventListener("click",(function(e){e.target&&"game"===e.target.id&&t.startGame()}))}}return{init:function(i){this.initBuildHtml(i),this.main();const s=new e,r=new t,o=new n;s.init(document.getElementById(i)),r.init(s),o.init(document.getElementById(i),r)},main:function(){console.log("Initializing the game")},initBuildHtml:function(e){const t=document.getElementById(e);t.className="app",t.innerHTML=`\n\t\t\t<header class="header">\n\t\t\t<img class="header-logo" src="${tr}" alt="Logo">\n\t\t</header>\n\t\t<main class="main">\n\t\t\t<nav class="main-menu" id="menu">\n\t\t\t\t<ul class="menu-list">\n\t\t\t\t\t<li><a class="menu-link" id="game" href="#game">Adventure</a></li>\n\t\t\t\t\t<li><a class="menu-link" href="#rules">How to play</a></li>\n\t\t\t\t\t<li><a class="menu-link" href="#records">Records</a></li>\n\t\t\t\t</ul>\n\t\t\t</nav>\n\t\t\t<div class="content" id="content"></div>\n\t\t</main>\n\t\t `}}}();document.addEventListener("DOMContentLoaded",xr.init("app"));const Pr=function(){function e(){let e=null,t=null,n=null,i=null,s=null;this.init=function(t){e=t,this.showLoginForm(),n=document.querySelector("#btnLogout"),i=t.querySelector("#login")},this.showLoginForm=function(){s='<div id="login" class="login">\n                          <form id="login-form" class="login-form">\n                            <div class="item">\n                              <label for="email">Email</label>\n                              <input id="email" class="input-login" name="email" type="email" autocomplete="on">\n                            </div>\n                              <div class="item">\n                                <label for="password">Password</label>\n                                <input id="password" class="input-login" name="password" type="password" autocomplete="off">\n                              </div>\n                                  <button id="btnLogin" type="button">Log in</button>\n                          </form>\n                  </div>',e.innerHTML=s},this.loginSuccess=function(e){t.style.color="rgb(153, 153, 153)",t.textContent=`${e}, login successfull!`},this.loginError=function(e){t.style.color="rgb(255, 0, 0)",t.textContent=`Login unsuccessfull: ${e}`},this.showForm=function(){n.style.display="none",i.style.display="block",muteBtn.style.display="none",menuBtn.style.display="none",document.body.classList.remove("game-bgnd")},this.hideForm=function(){n.style.display="block",i.style.display="none",muteBtn.style.display="block"},this.logoutError=function(e){console.log("An error happened.")}}function t(){let e=null;this.init=function(t){e=t},this.login=function(t,n){(function(e,t,n){return async function(e,t){return zi(gi(e),t)}($(e),Li.credential(t,n)).catch((async t=>{throw"auth/password-does-not-meet-requirements"===t.code&&async function(e){const t=gi(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}(e),t}))})(er,t,n).then((t=>{const n=t.user.email.split("@").slice(0,1)[0];e.loginSuccess(n),setTimeout((()=>{e.hideForm(),xr.init("app")}),750)})).catch((t=>{e.loginError(t.code)}))},this.logout=function(){(function(e){return $(e).signOut()})(er).then((()=>{Pr.init("app",!1),e.showForm()})).catch((t=>{e.logoutError(t)}))}}function n(){let e=null,t=null,n=null;this.init=function(n,i){e=i,t=n,this.addEventListeners()},this.addEventListeners=function(){t.addEventListener("click",(function(i){n=t.querySelector("#login-form"),i.target&&"btnLogin"===i.target.id&&(i.preventDefault(),i.stopPropagation(),e.login(t.querySelector("#email").value,t.querySelector("#password").value)),i.target&&"btnRegister"===i.target.id&&(i.preventDefault(),i.stopPropagation(),e.register(t.querySelector("#email").value,t.querySelector("#password").value))}))}}return{init:function(i){const s=new e,r=new t,o=new n;s.init(document.getElementById(i)),r.init(s),o.init(document.getElementById(i),r)}}}();Pr.init("app")})()})();